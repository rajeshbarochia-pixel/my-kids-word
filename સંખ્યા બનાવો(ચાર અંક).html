<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>àª¨àª‚àª¬àª° àªµà«àª¹à«€àª² àª—à«‡àª® - Number Wheel Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rasa:wght@400;700&display=swap');

        :root {
            --c1: #FF4757; /* àª²àª¾àª² (àªàª•àª®) */
            --c2: #2ED573; /* àª²à«€àª²à«‹ (àª¦àª¶àª•) */
            --c3: #1E90FF; /* àªµàª¾àª¦àª³à«€ (àª¸à«‹) */
            --c4: #FFA502; /* àª•à«‡àª¸àª°à«€ (àª¹àªœàª¾àª°) */
            --bg: #f1f2f6;
            --text: #2f3542;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Rasa', serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 100vh;
            height: -webkit-fill-available;
            overflow: hidden;
            touch-action: manipulation;
        }

        header {
            padding-top: 10px;
            text-align: center;
            flex-shrink: 0;
        }

        h1 {
            color: var(--text);
            margin: 0;
            font-size: 1.8rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .author-text {
            font-family: sans-serif;
            color: #747d8c;
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 2px;
        }

        /* Responsive Game Container */
        .game-wrapper {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            margin: 10px 0;
        }

        /* Indicator Window */
        .indicator-box {
            position: absolute;
            width: 44px;
            height: 150px; 
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid var(--text);
            border-bottom: none;
            z-index: 10;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -100%);
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            pointer-events: none;
        }

        .arrow {
            position: absolute;
            top: -22px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            color: var(--text);
            z-index: 20;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-5px); }
        }

        /* Rings */
        .ring {
            position: absolute;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transition: transform 2.5s cubic-bezier(0.1, 0.8, 0.1, 1);
            border: 2.5px solid white;
        }

        /* Ring Sizes optimized for 300px container */
        .ring-4 { width: 280px; height: 280px; background-color: var(--c4); z-index: 1; }
        .ring-3 { width: 210px; height: 210px; background-color: var(--c3); z-index: 2; }
        .ring-2 { width: 140px; height: 140px; background-color: var(--c2); z-index: 3; }
        .ring-1 { width: 70px; height: 70px; background-color: var(--c1); z-index: 4; }

        .num-wrapper {
            position: absolute;
            width: 26px;
            height: 26px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .num-content {
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
            transition: transform 2.5s cubic-bezier(0.1, 0.8, 0.1, 1);
        }

        .ring-1 .num-content { font-size: 0.9rem; }

        .hub {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #fff;
            border-radius: 50%;
            z-index: 20;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
        }

        /* Spinning State */
        .spinning .ring-1 { animation: rotate-ccw 0.8s linear infinite; }
        .spinning .ring-2 { animation: rotate-cw 1.2s linear infinite; }
        .spinning .ring-3 { animation: rotate-ccw 1.6s linear infinite; }
        .spinning .ring-4 { animation: rotate-cw 2s linear infinite; }

        @keyframes rotate-cw { 100% { transform: rotate(360deg); } }
        @keyframes rotate-ccw { 100% { transform: rotate(-360deg); } }

        /* Counter-Animations for Numbers */
        .spinning .ring-1 .num-content { animation: rotate-cw 0.8s linear infinite; }
        .spinning .ring-2 .num-content { animation: rotate-ccw 1.2s linear infinite; }
        .spinning .ring-3 .num-content { animation: rotate-cw 1.6s linear infinite; }
        .spinning .ring-4 .num-content { animation: rotate-ccw 2s linear infinite; }

        /* Result Area */
        .bottom-section {
            width: 100%;
            padding: 10px 20px 25px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            flex-shrink: 0;
        }

        .result-area {
            background: white;
            padding: 10px 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            width: 90%;
            max-width: 320px;
        }

        .result-title { font-size: 0.9rem; color: #a4b0be; font-weight: bold; }
        .result-value { font-size: 2.2rem; color: var(--text); font-weight: bold; letter-spacing: 4px; line-height: 1; margin: 5px 0; }
        .result-words { font-size: 1.1rem; color: #57606f; min-height: 1.5rem; }

        button {
            padding: 12px 0;
            width: 80%;
            max-width: 260px;
            font-size: 1.4rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Rasa', serif;
            font-weight: bold;
            box-shadow: 0 4px 0 rgba(0,0,0,0.15);
            transition: all 0.1s;
            background-color: #2ED573;
            color: white;
        }

        button:active { transform: translateY(3px); box-shadow: none; }
        button.btn-stop { background-color: #FF4757; }
        button:disabled { background-color: #ccc; opacity: 0.7; }

        #confetti-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 100;
        }

        /* Scale adjustments for small screens */
        @media (max-height: 600px) {
            h1 { font-size: 1.5rem; }
            .game-wrapper { transform: scale(0.85); margin: -10px 0; }
            .bottom-section { padding-bottom: 10px; gap: 8px; }
            .result-value { font-size: 1.8rem; }
            button { padding: 8px 0; font-size: 1.2rem; }
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ¡ àª¨àª‚àª¬àª° àªµà«àª¹à«€àª² ğŸ¡</h1>
        <div class="author-text">Rajesh Barochia</div>
    </header>

    <div class="game-wrapper" id="gameWrapper">
        <div class="indicator-box"></div>
        <div class="arrow">ğŸ”»</div>

        <div class="ring ring-4" id="ring4"></div>
        <div class="ring ring-3" id="ring3"></div>
        <div class="ring ring-2" id="ring2"></div>
        <div class="ring ring-1" id="ring1"></div>
        
        <div class="hub"></div>
    </div>

    <div class="bottom-section">
        <div class="result-area">
            <div class="result-title">àª¤àª®àª¾àª°à«‹ àª¨àª‚àª¬àª°:</div>
            <div class="result-value" id="resultDisplay">----</div>
            <div class="result-words" id="resultWords"></div>
        </div>

        <button id="toggleBtn" onclick="toggleSpin()">ğŸš€ àª«à«‡àª°àªµà«‹</button>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        const digits = ['à«¦', 'à«§', 'à«¨', 'à«©', 'à«ª', 'à««', 'à«¬', 'à«­', 'à«®', 'à«¯'];
        
        const rings = [
            { id: 'ring1', radius: 35, el: null }, // àªàª•àª®
            { id: 'ring2', radius: 70, el: null }, // àª¦àª¶àª•
            { id: 'ring3', radius: 105, el: null }, // àª¸à«‹
            { id: 'ring4', radius: 140, el: null }  // àª¹àªœàª¾àª°
        ];

        let isSpinning = false;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // Gujarati Number Words Mappings
        const units = ["", "àªàª•", "àª¬à«‡", "àª¤à«àª°àª£", "àªšàª¾àª°", "àªªàª¾àª‚àªš", "àª›", "àª¸àª¾àª¤", "àª†àª ", "àª¨àªµ"];
        const tens = ["", "àª¦àª¸", "àªµà«€àª¸", "àª¤à«àª°à«€àª¸", "àªšàª¾àª²à«€àª¸", "àªªàªšàª¾àª¸", "àª¸àª¾àª ", "àª¸àª¿àª¤à«àª¤à«‡àª°", "àªàª‚àª¸à«€", "àª¨à«‡àªµà«àª‚"];
        const hundredWord = "àª¸à«‹";
        const thousandWord = "àª¹àªœàª¾àª°";

        // Specialized Gujarati 1-99 for accurate pronunciation
        const fullNumbers = {
            1: "àªàª•", 2: "àª¬à«‡", 3: "àª¤à«àª°àª£", 4: "àªšàª¾àª°", 5: "àªªàª¾àª‚àªš", 6: "àª›", 7: "àª¸àª¾àª¤", 8: "àª†àª ", 9: "àª¨àªµ", 10: "àª¦àª¸",
            11: "àª…àª—àª¿àª¯àª¾àª°", 12: "àª¬àª¾àª°", 13: "àª¤à«‡àª°", 14: "àªšà«Œàª¦", 15: "àªªàª‚àª¦àª°", 16: "àª¸à«‹àª³", 17: "àª¸àª¤à«àª¤àª°", 18: "àª…àª¢àª¾àª°", 19: "àª“àª—àª£à«€àª¸", 20: "àªµà«€àª¸",
            21: "àªàª•àªµà«€àª¸", 22: "àª¬àª¾àªµà«€àª¸", 23: "àª¤à«àª°à«‡àªµà«€àª¸", 24: "àªšà«‹àªµà«€àª¸", 25: "àªªàªšà«€àª¸", 26: "àª›àªµà«àªµà«€àª¸", 27: "àª¸àª¤à«àª¤àª¾àªµà«€àª¸", 28: "àª…àª à«àª àª¾àªµà«€àª¸", 29: "àª“àª—àª£àª¤à«àª°à«€àª¸", 30: "àª¤à«àª°à«€àª¸",
            31: "àªàª•àª¤à«àª°à«€àª¸", 32: "àª¬àª¤à«àª°à«€àª¸", 33: "àª¤à«‡àª‚àª¤à«àª°à«€àª¸", 34: "àªšà«‹àª¤à«àª°à«€àª¸", 35: "àªªàª¾àª‚àª¤à«àª°à«€àª¸", 36: "àª›àª¤à«àª°à«€àª¸", 37: "àª¸àª¾àª¡àª¤à«àª°à«€àª¸", 38: "àª†àª¡àª¤à«àª°à«€àª¸", 39: "àª“àª—àª£àªšàª¾àª²à«€àª¸", 40: "àªšàª¾àª²à«€àª¸",
            41: "àªàª•àª¤àª¾àª²à«€àª¸", 42: "àª¬à«‡àª¤àª¾àª²à«€àª¸", 43: "àª¤àª¾àª²à«€àª¸", 44: "àªšà«àª‚àª®àª¾àª²à«€àª¸", 45: "àªªàª¿àª¸à«àª¤àª¾àª²à«€àª¸", 46: "àª›à«‡àª¤àª¾àª²à«€àª¸", 47: "àª¸à«àª¡àª¤àª¾àª²à«€àª¸", 48: "àª…àª¡àª¤àª¾àª²à«€àª¸", 49: "àª“àª—àª£àªªàªšàª¾àª¸", 50: "àªªàªšàª¾àª¸",
            51: "àªàª•àª¾àªµàª¨", 52: "àª¬àª¾àªµàª¨", 53: "àª¤à«àª°à«‡àªªàª¨", 54: "àªšà«‹àªªàª¨", 55: "àªªàª‚àªšàª¾àªµàª¨", 56: "àª›àªªà«àªªàª¨", 57: "àª¸àª¤à«àª¤àª¾àªµàª¨", 58: "àª…àª à«àª àª¾àªµàª¨", 59: "àª“àª—àª£àª¸àª¾àª ", 60: "àª¸àª¾àª ",
            61: "àªàª•àª¸àª ", 62: "àª¬àª¾àª¸àª ", 63: "àª¤à«àª°à«‡àª¸àª ", 64: "àªšà«‹àª¸àª ", 65: "àªªàª¾àª¸àª ", 66: "àª›àª¾àª¸àª ", 67: "àª¸àª¡àª¸àª ", 68: "àª…àª¡àª¸àª ", 69: "àª“àª—àª£àª¸àª¿àª¤à«àª¤à«‡àª°", 70: "àª¸àª¿àª¤à«àª¤à«‡àª°",
            71: "àªàª•à«‹àª¤à«‡àª°", 72: "àª¬àª¹à«‹àª¤à«‡àª°", 73: "àª¤à«‹àª¤à«‡àª°", 74: "àªšà«àª®à«‹àª¤à«‡àª°", 75: "àªªàª‚àªšà«‹àª¤à«‡àª°", 76: "àª›à«‹àª¤à«‡àª°", 77: "àª¸àª¿àª¤à«àª¤à«‹àª¤à«‡àª°", 78: "àª‡àª à«àª à«‹àª¤à«‡àª°", 79: "àª“àª—àª£àªàª‚àª¸à«€", 80: "àªàª‚àª¸à«€",
            81: "àªàª•à«àª¯àª¾àª¸à«€", 82: "àª¬à«àª¯àª¾àª¸à«€", 83: "àª¤à«àª¯àª¾àª¸à«€", 84: "àªšà«‹àª°à«àª¯àª¾àª¸à«€", 85: "àªªàª‚àªšàª¾àª¸à«€", 86: "àª›à«àª¯àª¾àª¸à«€", 87: "àª¸àª¤à«àª¯àª¾àª¸à«€", 88: "àª…àª à«àª¯àª¾àª¸à«€", 89: "àª“àª—àª£àª¨à«‡àªµà«àª‚", 90: "àª¨à«‡àªµà«àª‚",
            91: "àªàª•à«àª¯àª¾àª£à«àª‚", 92: "àª¬àª¾àª£à«àª‚", 93: "àª¤à«àª°àª¾àª£à«àª‚", 94: "àªšà«‹àª°àª¾àª£à«àª‚", 95: "àªªàª‚àªšàª¾àª£à«àª‚", 96: "àª›àª¨à«àª¨à«àª‚", 97: "àª¸àª¤à«àª¤àª¾àª£à«àª‚", 98: "àª…àª à«àª àª¾àª£à«àª‚", 99: "àª¨àªµà«àªµàª¾àª£à«àª‚"
        };

        function getGujaratiWords(n) {
            if (n === 0) return "àª¶à«‚àª¨à«àª¯";
            let parts = [];
            
            // Thousands
            let h = Math.floor(n / 1000);
            if (h > 0) {
                parts.push(units[h] + " " + thousandWord);
            }
            
            // Hundreds
            let s = Math.floor((n % 1000) / 100);
            if (s > 0) {
                // Exceptional cases for 100 and 200 in Gujarati
                if (s === 1) parts.push("àªàª•àª¸à«‹");
                else if (s === 2) parts.push("àª¬àª¸à«‹");
                else parts.push(units[s] + "àª¸à«‹");
            }
            
            // Last Two Digits
            let lastTwo = n % 100;
            if (lastTwo > 0) {
                parts.push(fullNumbers[lastTwo]);
            }
            
            return parts.join(" ");
        }

        function playTone(freq, type, duration) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.type = type;
            osc.frequency.value = freq;
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function init() {
            rings.forEach(ring => {
                ring.el = document.getElementById(ring.id);
                for (let i = 0; i < 10; i++) {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'num-wrapper';
                    const content = document.createElement('div');
                    content.className = 'num-content';
                    content.innerText = digits[i];
                    const angle = i * 36;
                    const rad = (angle - 90) * (Math.PI / 180); 
                    const x = (ring.radius - 13) * Math.cos(rad); 
                    const y = (ring.radius - 13) * Math.sin(rad);
                    wrapper.style.transform = `translate(${x}px, ${y}px)`;
                    wrapper.appendChild(content);
                    ring.el.appendChild(wrapper);
                }
            });
        }

        function toggleSpin() {
            const btn = document.getElementById('toggleBtn');
            const resVal = document.getElementById('resultDisplay');
            const resWords = document.getElementById('resultWords');

            if (!isSpinning) {
                isSpinning = true;
                btn.innerText = "ğŸ›‘ àª¥à«‹àª­à«‹";
                btn.classList.add('btn-stop');
                document.getElementById('gameWrapper').classList.add('spinning');
                resVal.innerText = "----";
                resWords.innerText = "";
                
                rings.forEach(r => {
                    r.el.style.transform = '';
                    Array.from(r.el.getElementsByClassName('num-content')).forEach(c => c.style.transform = '');
                });
                playTone(400, 'square', 0.1);
            } else {
                isSpinning = false;
                btn.disabled = true;
                document.getElementById('gameWrapper').classList.remove('spinning');

                let generatedNums = [];
                rings.forEach((ring, index) => {
                    const win = Math.floor(Math.random() * 10);
                    generatedNums.push(win);
                    const angleNeeded = -1 * (win * 36);
                    const totalRotation = angleNeeded - (1080 + (index * 360)); 
                    ring.el.style.transform = `rotate(${totalRotation}deg)`;
                    const counter = -1 * totalRotation;
                    Array.from(ring.el.getElementsByClassName('num-content')).forEach(num => {
                        num.style.transform = `rotate(${counter}deg)`;
                    });
                });

                // Logic: Index 0=1s, 1=10s, 2=100s, 3=1000s
                const totalNumberValue = generatedNums[3]*1000 + generatedNums[2]*100 + generatedNums[1]*10 + generatedNums[0];
                const displayStr = digits[generatedNums[3]] + digits[generatedNums[2]] + digits[generatedNums[1]] + digits[generatedNums[0]];
                const gujWords = getGujaratiWords(totalNumberValue);

                setTimeout(() => {
                    resVal.innerText = displayStr;
                    resWords.innerText = gujWords;
                    btn.disabled = false;
                    btn.innerText = "ğŸš€ àª«à«‡àª°àªµà«‹";
                    btn.classList.remove('btn-stop');
                    playTone(800, 'triangle', 0.5); 
                    speakResult(gujWords);
                    fireConfetti();
                }, 2600);
            }
        }

        function speakResult(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance();
            msg.text = "àª¤àª®àª¾àª°à«‹ àª¨àª‚àª¬àª° àª›à«‡, " + text; 
            msg.lang = 'gu-IN';
            msg.rate = 0.85;
            window.speechSynthesis.speak(msg);
        }

        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];
            for(let i=0; i<80; i++) {
                particles.push({
                    x: canvas.width/2, y: canvas.height/2,
                    vx: (Math.random()-0.5)*12, vy: (Math.random()-0.5)*12 - 5,
                    color: `hsl(${Math.random()*360}, 80%, 60%)`, life: 100
                });
            }
            function update() {
                ctx.clearRect(0,0,canvas.width, canvas.height);
                particles.forEach((p, index) => {
                    p.x += p.vx; p.y += p.vy; p.vy += 0.4; p.life--;
                    ctx.fillStyle = p.color; ctx.beginPath();
                    ctx.arc(p.x, p.y, 4, 0, Math.PI*2); ctx.fill();
                    if(p.life <= 0) particles.splice(index, 1);
                });
                if(particles.length > 0) requestAnimationFrame(update);
            }
            update();
        }

        init();
    </script>
</body>
</html>


<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рк╡рк┐рк░рлЛркзрлА рк╢ркмрлНркжрлЛркирлА рк░ркоркд (Antonym Game)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font (Fallback) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Gujarati:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans Gujarati', 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        .option-button {
            transition: all 0.2s ease-in-out;
        }
        .option-button:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* ркХркирлНрклрк░рлНркорлЗрк╢рки рккрк░ ркмрк╛ркЬрлБркирк╛ рк╢ркмрлНркж ркорк╛ркЯрлЗ ркПркирк┐ркорлЗрк╢рки */
        .antonym-transition {
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- ркорлБркЦрлНркп ркЧрлЗрко ркХркирлНркЯрлЗркирк░ -->
    <div id="game-container" class="w-full max-w-lg bg-white shadow-2xl rounded-3xl p-6 md:p-8 border-t-8 border-indigo-500">
        
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-indigo-700">рк╡рк┐рк░рлЛркзрлА рк╢ркмрлНркжркирлА рк░ркоркд</h1>
            <p class="text-gray-500 mt-1">рк╕рк╛ркЪрлЛ рк╡рк┐рк░рлЛркзрлА рк╢ркмрлНркж рккрк╕ркВркж ркХрк░рлЛ.</p>
            <!-- ркЕрк╣рлАркВ ркирк╡рлБркВ ркПрк▓рк┐ркорлЗркирлНркЯ ркЙркорлЗрк░рлНркпрлБркВ ркЫрлЗ -->
            <p class="text-sm text-gray-400 mt-1">Created by: Rajesh barochia</p>
        </header>

        <!-- рк╕рлНркХрлЛрк░ ркЕркирлЗ рккрлНрк░рк╢рлНрки ркиркВркмрк░ -->
        <div class="flex justify-between items-center mb-6 p-3 bg-indigo-50 rounded-xl shadow-inner">
            <p class="text-lg font-medium text-indigo-600">рк╕рлНркХрлЛрк░: <span id="score" class="font-bold text-xl">0</span></p>
            <p class="text-lg font-medium text-indigo-600">рккрлНрк░рк╢рлНрки: <span id="question-count" class="font-bold text-xl">1</span></p>
        </div>

        <!-- рк╡рк░рлНркдркорк╛рки рккрлНрк░рк╢рлНрки ркЕркирлЗ ркЬрк╡рк╛ркмркирлА ркЬрлЛркбрлА -->
        <div id="question-area" class="text-center mb-8">
            <p class="text-xl text-gray-700 mb-4">ркЖ рк╢ркмрлНркжркирлЛ рк╡рк┐рк░рлЛркзрлА рк╢ркмрлНркж ркХркпрлЛ ркЫрлЗ?</p>
            <div id="word-pair-container" class="flex justify-center items-center space-x-2">
                <!-- рккрлНрк░рк╢рлНрки рк╢ркмрлНркж -->
                <div id="question-word-display" class="inline-block px-6 py-3 text-2xl font-extrabold text-white bg-indigo-600 rounded-full shadow-lg transition duration-300 cursor-default">
                    рк╢ркмрлНркж
                </div>
                
                <!-- рк╕рлЗрккрк░рлЗркЯрк░ 'X' -->
                <span id="separator" class="hidden text-3xl font-extrabold text-indigo-700">X</span> 
                
                <!-- рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм, ркЬрлЗ рк╕рк╛ркЪрлЛ рккркбрлЗ ркдрлНркпрк╛рк░рлЗ ркжрлЗркЦрк╛рк╢рлЗ -->
                <div id="correct-antonym-display" class="hidden antonym-transition px-6 py-3 text-2xl font-extrabold text-white bg-emerald-600 rounded-full shadow-lg cursor-default opacity-0 transform translate-x-10">
                    <!-- ркЬрк╡рк╛ркм ркЕрк╣рлАркВ ркЖрк╡рк╢рлЗ -->
                </div>
            </div>
        </div>

        <!-- рк╡рк┐ркХрк▓рлНрккрлЛ -->
        <div id="options-container" class="grid grid-cols-4 gap-2">
            <!-- рк╡рк┐ркХрк▓рлНркк ркмркЯркирлЛ ркЕрк╣рлАркВ JavaScript ркжрлНрк╡рк╛рк░рк╛ ркЙркорлЗрк░рк╛рк╢рлЗ -->
        </div>
        
        <!-- рккрлНрк░ркдрк┐ркнрк╛рк╡ рк╕ркВркжрлЗрк╢ -->
        <div id="feedback-message" class="text-center mt-6 h-8 text-lg font-semibold" aria-live="polite">
            <!-- рккрлНрк░ркдрк┐ркнрк╛рк╡ рк╕ркВркжрлЗрк╢ ркЕрк╣рлАркВ ркжрлЗркЦрк╛рк╢рлЗ -->
        </div>

        <!-- рк░рлАрк╕рлНркЯрк╛рк░рлНркЯ ркмркЯрки (ркЧрлЗрко рккрлВрк░рлНркг ркеркпрк╛ рккркЫрлА ркжрлЗркЦрк╛рк╢рлЗ) -->
        <div id="restart-area" class="text-center mt-8 hidden">
            <button onclick="startGame()" class="px-8 py-3 bg-emerald-500 text-white font-bold rounded-full shadow-lg hover:bg-emerald-600 transition duration-200">
                ркирк╡рлА рк░ркоркд рк╢рк░рлВ ркХрк░рлЛ
            </button>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firestore ркорк╛ркЯрлЗ рк▓рлЛркЧ рк▓рлЗрк╡рк▓ рк╕рлЗркЯ ркХрк░рлЛ (рк╡рлИркХрк▓рлНрккрк┐ркХ, ркбрлАркмркЧрк┐ркВркЧ ркорк╛ркЯрлЗ)
        setLogLevel('Debug');

        // Firebase ркЧрлНрк▓рлЛркмрк▓ рк╡рлЗрк░рк┐ркпрлЗркмрк▓рлНрк╕ркирлЛ ркЙрккркпрлЛркЧ
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app, db, auth;
        let userId = null;
        let isAuthReady = false;

        // Firebase рккрлНрк░рк╛рк░ркВркн ркХрк░рлЛ
        if (firebaseConfig) {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // ркУркерлЗркирлНркЯрк┐ркХрлЗрк╢рки рк╕рлНркерк┐ркдрк┐ркирлБркВ ркирк┐рк░рлАркХрлНрк╖ркг ркХрк░рлЛ
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("рк╡рккрк░рк╛рк╢ркХрк░рлНркдрк╛ ID:", userId);
                    } else {
                        // ркЬрлЛ ркпрлБркЭрк░ рк▓рлЛркЧркЖркЙркЯ ркерк╛ркп, ркдрлЛ рккркг ID рк╕рлЗркЯ рк░рк╛ркЦрлЛ
                        userId = userId || crypto.randomUUID();
                    }
                    isAuthReady = true;
                    // ркЕрк╣рлАркВ Firestore рк╕ркВркмркВркзрк┐ркд рк▓рлЛркбрк┐ркВркЧ ркЕркерк╡рк╛ рк╕рлНркирлЗрккрк╢рлЛркЯ рк╢рк░рлВ ркХрк░рлА рк╢ркХрк╛ркп ркЫрлЗ
                    console.log("Firebase Authentication ркдрлИркпрк╛рк░ ркЫрлЗ.");
                });

                // ркХрк╕рлНркЯрко ркЯрлЛркХрки ркЕркерк╡рк╛ ркЕркирк╛ркорлА рк╕рк╛ркЗрки-ркЗрки ркжрлНрк╡рк╛рк░рк╛ ркУркерлЗркирлНркЯрк┐ркХрлЗрк╢рки
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Firebase рккрлНрк░рк╛рк░ркВркн ркХрк░рк╡рк╛ркорк╛ркВ ркЕркерк╡рк╛ ркУркерлЗркирлНркЯрк┐ркХрлЗркЯ ркХрк░рк╡рк╛ркорк╛ркВ ркнрлВрк▓:", error);
            }
        } else {
            console.error("Firebase рк░рлВрккрк░рлЗркЦрк╛ркВркХрки (config) ркЙрккрк▓ркмрлНркз ркиркерлА.");
            // ркЬрлЛ Firebase ркЙрккрк▓ркмрлНркз рки рк╣рлЛркп, ркдрлЛ ркпрлБркЭрк░ ID ркорк╛ркЯрлЗ Random ID ркирлЛ ркЙрккркпрлЛркЧ ркХрк░рлЛ
            userId = crypto.randomUUID();
            isAuthReady = true;
        }

        // ркЧрлЗрко рк▓рлЛркЬрк┐ркХ ркЧрлНрк▓рлЛркмрк▓ рк╕рлНркХрлЛрккркорк╛ркВ ркЫрлЗ ркдрлЗркерлА ркдрлЗ ркНркХрлНрк╕рлЗрк╕ ркХрк░рлА рк╢ркХрк╛ркп
        window.startGame = startGame;
    </script>

    <script>
        // рк╡рк┐рк░рлЛркзрлА рк╢ркмрлНркжрлЛркирлА ркЬрлЛркбрлА (ркЫркмрлАркорк╛ркВркерлА рк▓рлЗрк╡рк╛ркорк╛ркВ ркЖрк╡рлЗрк▓)
        const ANTONYMS = [
            ["ркирк╛ркирлБркВ", "ркорлЛркЯрлБркВ"], ["ркХрк╛рк│рлБркВ", "ркзрлЛрк│рлБркВ"], ["рк╡ркзрк╡рлБркВ", "ркУркЫрлБркВ"], ["рк▓рлАрк▓рлБркВ", "рк╕рлВркХрлБркВ"],
            ["рк╕рлБркЦ", "ркжрлБркГркЦ"], ["ркКркВркЪрлБркВ", "ркирлАркЪрлБркВ"], ["ркЬрк╛ркбрлБркВ", "рккрк╛ркдрк│рлБркВ"], ["ркорлЛркбрлБркВ", "рк╡рк╣рлЗрк▓рлБркВ"],
            ["рк╕ркоркЬ", "ркЕркгрк╕ркоркЬ"], ["ркЙрккркпрлЛркЧрлА", "ркмрк┐ркиркЙрккркпрлЛркЧрлА"], ["рк╡рлНркпрк╛ркЬркмрлА", "ркмрк┐ркирк╡рлНркпрк╛ркЬркмрлА"],
            ["ркдрк░рк╡рлБркВ", "ркбрлВркмрк╡рлБркВ"], ["ркорк╛ркдрк╛", "рккрк┐ркдрк╛"], ["рк╣рк╕рк╡рлБркВ", "рк░ркбрк╡рлБркВ"], ["ркорлВрк░рлНркЦ", "рк╣рлЛрк╢рк┐ркпрк╛рк░"],
            ["ркнрк╛ркИ", "ркмрк╣рлЗрки"], ["рк╕рк╛ркЪрлБркВ", "ркЦрлЛркЯрлБркВ"], ["рк░рк╛ркд", "ркжрк┐рк╡рк╕"], ["ркЕркВркжрк░", "ркмрк╣рк╛рк░"],
            ["ркЧркорлЛ", "ркЕркгркЧркорлЛ"], ["ркЖрк╡ркбркд", "ркЕркгркЖрк╡ркбркд"], ["ркорк╛ркирлАркдрлА", "ркЕркгркорк╛ркирлАркдрлА"],
            ["ркЕркВркзрк╛рк░рлБркВ", "ркЕркЬрк╡рк╛рк│рлБркВ"], ["ркЖркЧрк│", "рккрк╛ркЫрк│"], ["ркХркаркг", "ркирк░рко"], ["ркЙрккрк░", "ркирлАркЪрлЗ"],
            ["рккрлВркирко", "ркЕркорк╛рк╕"], ["ркорк╛рк░рлБркВ", "ркдрк╛рк░рлБркВ"], ["рк╕рк╛рк░рлБркВ", "ркЦрк░рк╛ркм"], ["ркЖрк╡рк╡рлБркВ", "ркЬрк╡рлБркВ"],
            ["ркЭрлЗрк░рлА", "ркмрк┐ркиркЭрлЗрк░рлА"]
        ];
        
        // ркЧрлЗркоркирлА рк╕рлНркерк┐ркдрк┐ (State)
        let score = 0;
        let currentQuestion = 0;
        const totalQuestions = ANTONYMS.length;
        let currentAntonymPair = [];
        
        // DOM ркПрк▓рк┐ркорлЗркирлНркЯрлНрк╕
        const scoreDisplay = document.getElementById('score');
        const questionCountDisplay = document.getElementById('question-count');
        
        // **ркЕрк╣рлАркВ рклрлЗрк░рклрк╛рк░ ркХрк░рлЗрк▓ ркЫрлЗ**
        const questionWordDisplay = document.getElementById('question-word-display'); 
        const correctAntonymDisplay = document.getElementById('correct-antonym-display'); 
        const separator = document.getElementById('separator'); 
        // ********************************

        const optionsContainer = document.getElementById('options-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const restartArea = document.getElementById('restart-area');

        // рк╢рклрк▓ (Shuffle) рклркВркХрлНрк╢рки
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // ркмркзрк╛ рк╢ркмрлНркжрлЛркирлА ркПркХ ркпрк╛ркжрлА
        const ALL_WORDS = ANTONYMS.flat();

        // рк░рлЗркирлНркбрко ркХрк▓рк░ ркХрлНрк▓рк╛рк╕ рккрк╕ркВркж ркХрк░рк╡рк╛ ркорк╛ркЯрлЗркирлА ркпрк╛ркжрлА
        const COLOR_CLASSES = [
            "bg-blue-500 hover:bg-blue-600",
            "bg-green-500 hover:bg-green-600",
            "bg-red-500 hover:bg-red-600",
            "bg-yellow-500 hover:bg-yellow-600",
            "bg-purple-500 hover:bg-purple-600",
            "bg-pink-500 hover:bg-pink-600",
            "bg-teal-500 hover:bg-teal-600"
        ];

        // рк░рлЗркирлНркбркорк▓рлА ркПркХ ркХрк▓рк░ ркХрлНрк▓рк╛рк╕ рккрк╕ркВркж ркХрк░рлЛ
        function getRandomColor() {
            return COLOR_CLASSES[Math.floor(Math.random() * COLOR_CLASSES.length)];
        }

        // ркирк╡рлЛ рккрлНрк░рк╢рлНрки рк▓рлЛркб ркХрк░рлЛ
        function loadNewQuestion() {
            if (currentQuestion >= totalQuestions) {
                endGame();
                return;
            }

            // рккрлНрк░рк╢рлНрки ркиркВркмрк░ ркЕрккркбрлЗркЯ ркХрк░рлЛ
            questionCountDisplay.textContent = currentQuestion + 1;
            
            // рк░рлЗркирлНркбркорк▓рлА ркПркХ ркЬрлЛркбрлА рккрк╕ркВркж ркХрк░рлЛ
            const pairIndex = Math.floor(Math.random() * ANTONYMS.length);
            currentAntonymPair = ANTONYMS.splice(pairIndex, 1)[0]; // рк╡рккрк░рк╛ркпрлЗрк▓рлА ркЬрлЛркбрлА ркжрлВрк░ ркХрк░рлЛ

            // рккрлНрк░рк╢рлНрки рк╢ркмрлНркж (wordA) ркЕркирлЗ рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм (wordB) рк░рлЗркирлНркбркорк▓рлА рккрк╕ркВркж ркХрк░рлЛ
            const isReversed = Math.random() < 0.5;
            const questionWord = isReversed ? currentAntonymPair[1] : currentAntonymPair[0];
            const correctAnswer = isReversed ? currentAntonymPair[0] : currentAntonymPair[1];

            // рккрлНрк░рк╢рлНрки рк╢ркмрлНркж рккрлНрк░ркжрк░рлНрк╢рк┐ркд ркХрк░рлЛ
            questionWordDisplay.textContent = questionWord; // **ркЕрк╣рлАркВ рклрлЗрк░рклрк╛рк░ ркХрк░рлЗрк▓ ркЫрлЗ**

            // ркЬрк╡рк╛ркм ркЕркирлЗ рк╕рлЗрккрк░рлЗркЯрк░ ркЫрлБрккрк╛рк╡рлЛ
            correctAntonymDisplay.classList.add('hidden', 'opacity-0', 'translate-x-10');
            separator.classList.add('hidden');
            
            // рк╡рк┐ркХрк▓рлНрккрлЛ ркмркирк╛рк╡рлЛ (рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм + 3 ркЦрлЛркЯрк╛ рк╡рк┐ркХрк▓рлНрккрлЛ)
            let options = [correctAnswer];
            let distractorPool = [...ALL_WORDS].filter(word => 
                !currentAntonymPair.includes(word) && word !== questionWord
            );
            shuffleArray(distractorPool);
            
            // 3 ркЦрлЛркЯрк╛ рк╡рк┐ркХрк▓рлНрккрлЛ ркЙркорлЗрк░рлЛ
            for (let i = 0; i < 3 && i < distractorPool.length; i++) {
                options.push(distractorPool[i]);
            }
            
            shuffleArray(options); // рк╡рк┐ркХрк▓рлНрккрлЛркирлЗ рк╢рклрк▓ ркХрк░рлЛ

            // рк╡рк┐ркХрк▓рлНрккрлЛ рккрлНрк░ркжрк░рлНрк╢рк┐ркд ркХрк░рлЛ
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = `option-button text-white font-semibold py-4 rounded-xl shadow-md ${getRandomColor()} transform active:scale-95 disabled:opacity-75`;
                button.onclick = () => checkAnswer(option, correctAnswer);
                optionsContainer.appendChild(button);
            });
        }

        // ркЬрк╡рк╛ркм ркдрккрк╛рк╕рлЛ
        function checkAnswer(selectedOption, correctAnswer) {
            // ркмркзрк╛ рк╡рк┐ркХрк▓рлНрккрлЛркирлЗ ркЕркХрлНрк╖рко (disable) ркХрк░рлЛ
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.disabled = true;
                btn.classList.add('disabled');
            });

            // рккрк╕ркВркж ркХрк░рлЗрк▓ ркмркЯрки рк╢рлЛркзрлЛ ркЕркирлЗ ркдрлЗркирлЗ ркЕрккркбрлЗркЯ ркХрк░рлЛ
            const selectedButton = Array.from(optionsContainer.children).find(btn => btn.textContent === selectedOption);
            
            // рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм ркмркЯрки рк╢рлЛркзрлЛ
            const correctButton = Array.from(optionsContainer.children).find(btn => btn.textContent === correctAnswer);

            if (selectedOption === correctAnswer) {
                // рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм
                score++;
                scoreDisplay.textContent = score;
                feedbackMessage.textContent = 'рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм! ЁЯОЙ';
                feedbackMessage.className = 'text-center mt-6 h-8 text-lg font-semibold text-emerald-600';
                
                // **ркирк╡рлЛ рклрлЗрк░рклрк╛рк░: рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм ркорлБркЦрлНркп рк╢ркмрлНркжркирлА ркмрк╛ркЬрлБркорк╛ркВ ркЧрлЛркарк╡рлЛ**
                correctAntonymDisplay.textContent = correctAnswer;
                separator.classList.remove('hidden');
                correctAntonymDisplay.classList.remove('hidden', 'translate-x-10');
                correctAntonymDisplay.classList.add('opacity-100', 'translate-x-0'); // Transition effect
                
                // рк▓рлАрк▓рлЛ рк░ркВркЧ ркЖрккрлЛ
                selectedButton.classList.remove(...selectedButton.classList);
                selectedButton.className = 'option-button text-white font-semibold py-4 rounded-xl shadow-lg bg-emerald-500 disabled:opacity-100';

            } else {
                // ркЦрлЛркЯрлЛ ркЬрк╡рк╛ркм
                feedbackMessage.textContent = `ркЦрлЛркЯрлЛ ркЬрк╡рк╛ркм. рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм ркЫрлЗ: ${correctAnswer}`;
                feedbackMessage.className = 'text-center mt-6 h-8 text-lg font-semibold text-red-600';
                
                // рк▓рк╛рк▓ рк░ркВркЧ ркЖрккрлЛ
                selectedButton.classList.remove(...selectedButton.classList);
                selectedButton.className = 'option-button text-white font-semibold py-4 rounded-xl shadow-lg bg-red-500 disabled:opacity-100';

                // рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркмркирлЗ рк╣рк╛ркЗрк▓рк╛ркЗркЯ ркХрк░рлЛ
                correctButton.classList.remove(...correctButton.classList);
                correctButton.className = 'option-button text-white font-semibold py-4 rounded-xl shadow-lg bg-indigo-500 disabled:opacity-100 ring-4 ring-indigo-300';
            }

            currentQuestion++;
            // 2 рк╕рлЗркХркирлНркб рккркЫрлА ркирк╡рлЛ рккрлНрк░рк╢рлНрки рк▓рлЛркб ркХрк░рлЛ
            setTimeout(loadNewQuestion, 2000);
        }

        // ркЧрлЗрко рк╕ркорк╛рккрлНркд ркХрк░рлЛ
        function endGame() {
            questionWordDisplay.textContent = 'рк╕ркорк╛рккрлНркд!'; // **ркЕрк╣рлАркВ рклрлЗрк░рклрк╛рк░ ркХрк░рлЗрк▓ ркЫрлЗ**
            correctAntonymDisplay.classList.add('hidden'); // ркЬрк╡рк╛ркм ркЫрлБрккрк╛рк╡рлЛ
            separator.classList.add('hidden'); // рк╕рлЗрккрк░рлЗркЯрк░ ркЫрлБрккрк╛рк╡рлЛ
            optionsContainer.innerHTML = ''; // рк╡рк┐ркХрк▓рлНрккрлЛ ркжрлВрк░ ркХрк░рлЛ
            
            const finalScorePercentage = Math.round((score / totalQuestions) * 100);

            feedbackMessage.innerHTML = `
                ркдркорлЗ ${totalQuestions} ркорк╛ркВркерлА ${score} рккрлНрк░рк╢рлНркирлЛркирк╛ рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркм ркЖрккрлНркпрк╛ ркЫрлЗ.
                <br>ркдркорк╛рк░рлА рк╕рклрк│ркдрк╛: <span class="text-indigo-600">${finalScorePercentage}%</span>
            `;
            
            // рк░рлАрк╕рлНркЯрк╛рк░рлНркЯ ркмркЯрки ркмркдрк╛рк╡рлЛ
            restartArea.classList.remove('hidden');
        }

        // ркЧрлЗрко рк╢рк░рлВ ркХрк░рлЛ
        function startGame() {
            // ркЧрлЗркоркирлА рк╕рлНркерк┐ркдрк┐ рк░рлАрк╕рлЗркЯ ркХрк░рлЛ
            score = 0;
            currentQuestion = 0;
            scoreDisplay.textContent = '0';
            questionCountDisplay.textContent = '1';
            
            // ркорлВрк│ ркПркирлНркЯрлЛркирлАркорлНрк╕ ркПрк░рлЗркирлА ркиркХрк▓ ркмркирк╛рк╡рлЛ ркЬрлЗркерлА ркЧрлЗрко рк░рлАрк╕рлЗркЯ ркерк╛ркп ркдрлНркпрк╛рк░рлЗ ркЬрлЛркбрлАркУ рккрк╛ркЫрлА ркорк│рлЗ
            // ркЖ рк▓рк╛ркЗркиркирлЗ ркЕркиркирлНркп ркмркирк╛рк╡рк╡рк╛ ркорк╛ркЯрлЗ, ркЕркорлЗ ркдрлЗркирлЗ ркЕрк╕рлНркерк╛ркпрлА рк░рлВрккрлЗ ркиркХрк▓ ркмркирк╛рк╡рлАрк╢рлБркВ.
            // (ркЬрлНркпрк╛рк░рлЗ рккркг рк░ркоркд рклрк░рлАркерлА рк╢рк░рлВ ркерк╛ркп, ANTONYMS ркПрк░рлЗ ркЦрк╛рк▓рлА ркеркИ ркЬрк╛ркп ркЫрлЗ. ркдрлЗркерлА ркЕркорлЗ ркдрлЗркирлЗ ркЕрк╣рлАркВ рккрлБркиркГрк╕рлНркерк╛рккрк┐ркд ркХрк░рлАрк╢рлБркВ.)
            if (ANTONYMS.length === 0) {
                 ANTONYMS.push(
                    ["ркирк╛ркирлБркВ", "ркорлЛркЯрлБркВ"], ["ркХрк╛рк│рлБркВ", "ркзрлЛрк│рлБркВ"], ["рк╡ркзрк╡рлБркВ", "ркУркЫрлБркВ"], ["рк▓рлАрк▓рлБркВ", "рк╕рлВркХрлБркВ"],
                    ["рк╕рлБркЦ", "ркжрлБркГркЦ"], ["ркКркВркЪрлБркВ", "ркирлАркЪрлБркВ"], ["ркЬрк╛ркбрлБркВ", "рккрк╛ркдрк│рлБркВ"], ["ркорлЛркбрлБркВ", "рк╡рк╣рлЗрк▓рлБркВ"],
                    ["рк╕ркоркЬ", "ркЕркгрк╕ркоркЬ"], ["ркЙрккркпрлЛркЧрлА", "ркмрк┐ркиркЙрккркпрлЛркЧрлА"], ["рк╡рлНркпрк╛ркЬркмрлА", "ркмрк┐ркирк╡рлНркпрк╛ркЬркмрлА"],
                    ["ркдрк░рк╡рлБркВ", "ркбрлВркмрк╡рлБркВ"], ["ркорк╛ркдрк╛", "рккрк┐ркдрк╛"], ["рк╣рк╕рк╡рлБркВ", "рк░ркбрк╡рлБркВ"], ["ркорлВрк░рлНркЦ", "рк╣рлЛрк╢рк┐ркпрк╛рк░"],
                    ["ркнрк╛ркИ", "ркмрк╣рлЗрки"], ["рк╕рк╛ркЪрлБркВ", "ркЦрлЛркЯрлБркВ"], ["рк░рк╛ркд", "ркжрк┐рк╡рк╕"], ["ркЕркВркжрк░", "ркмрк╣рк╛рк░"],
                    ["ркЧркорлЛ", "ркЕркгркЧркорлЛ"], ["ркЖрк╡ркбркд", "ркЕркгркЖрк╡ркбркд"], ["ркорк╛ркирлАркдрлА", "ркЕркгркорк╛ркирлАркдрлА"],
                    ["ркЕркВркзрк╛рк░рлБркВ", "ркЕркЬрк╡рк╛рк│рлБркВ"], ["ркЖркЧрк│", "рккрк╛ркЫрк│"], ["ркХркаркг", "ркирк░рко"], ["ркЙрккрк░", "ркирлАркЪрлЗ"],
                    ["рккрлВркирко", "ркЕркорк╛рк╕"], ["ркорк╛рк░рлБркВ", "ркдрк╛рк░рлБркВ"], ["рк╕рк╛рк░рлБркВ", "ркЦрк░рк╛ркм"], ["ркЖрк╡рк╡рлБркВ", "ркЬрк╡рлБркВ"],
                    ["ркЭрлЗрк░рлА", "ркмрк┐ркиркЭрлЗрк░рлА"]
                 );
            }

            feedbackMessage.textContent = '';
            restartArea.classList.add('hidden');
            
            // рккрлНрк░ркерко рккрлНрк░рк╢рлНрки рк▓рлЛркб ркХрк░рлЛ
            loadNewQuestion();
        }

        // рккрлЗркЬ рк▓рлЛркб ркеркпрк╛ рккркЫрлА ркЧрлЗрко рк╢рк░рлВ ркХрк░рлЛ
        window.onload = startGame;
    </script>
</body>
</html>
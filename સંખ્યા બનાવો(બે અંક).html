<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>àª¨àª‚àª¬àª° àªµà«àª¹à«€àª² àª—à«‡àª® - Number Wheel Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rasa:wght@400;700&display=swap');

        :root {
            --c1: #FF4757; /* àªàª•àª® */
            --c2: #2ED573; /* àª¦àª¶àª• */
            --bg: #dfe4ea;
            --text: #2f3542;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Rasa', serif;
            background-color: var(--bg);
            margin: 0;
            padding: 10px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between; /* àªœàª—à«àª¯àª¾ àª¸àª°àª–à«€ àªµàª¹à«‡àª‚àªšàªµà«€ */
            height: 100vh;
            height: -webkit-fill-available; /* àª®à«‹àª¬àª¾àªˆàª² àª¬à«àª°àª¾àª‰àªàª° àª®àª¾àªŸà«‡ */
            overflow: hidden; /* àª¸à«àª•à«àª°à«‹àª² àª¬àª‚àª§ */
        }

        header {
            text-align: center;
            flex-shrink: 0;
        }

        h1 {
            color: var(--text);
            margin: 0;
            font-size: clamp(1.8rem, 5vh, 2.5rem); /* àª«à«‹àª¨à«àªŸ àª¸àª¾àªˆàª àª“àªŸà«‹ àª¸à«‡àªŸ àª¥àª¶à«‡ */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .author-text {
            font-family: sans-serif;
            color: #57606f;
            font-size: 0.9rem;
            font-weight: bold;
            margin-top: 5px;
        }

        /* àª°àª¿àª¸à«àªªà«‹àª¨à«àª¸àª¿àªµ àª—à«‡àª® àª•àª¨à«àªŸà«‡àª¨àª° */
        .game-wrapper {
            position: relative;
            /* àªªàª¹à«‹àª³àª¾àªˆ àª…àª¨à«‡ àªŠàª‚àªšàª¾àªˆ àª¸à«àª•à«àª°à«€àª¨ àª®à«àªœàª¬ àª¸à«‡àªŸ àª¥àª¶à«‡ */
            width: min(85vw, 55vh); 
            height: min(85vw, 55vh);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 1;
        }

        .indicator-box {
            position: absolute;
            width: 44px;
            height: 52%; /* àª°àª¿àª‚àª—àª¨àª¾ àª…àª¡àª§àª¾ àª­àª¾àª— àªœà«‡àªŸàª²à«àª‚ */
            background: rgba(255, 255, 255, 0.4);
            border: 2px solid #2f3542;
            border-bottom: none;
            z-index: 10;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -100%);
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
            pointer-events: none;
        }

        .arrow {
            position: absolute;
            top: -22px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.8rem;
            color: #2f3542;
            z-index: 20;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-5px); }
        }

        .ring {
            position: absolute;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transition: transform 2.5s cubic-bezier(0.1, 0.8, 0.1, 1);
            border: 3px solid white;
        }

        /* àª°àª¿àª‚àª—àª¨à«€ àª¸àª¾àªˆàª àª•àª¨à«àªŸà«‡àª¨àª°àª¨àª¾ % àª®à«àªœàª¬ */
        .ring-2 { width: 100%; height: 100%; background-color: var(--c2); z-index: 2; }
        .ring-1 { width: 55%; height: 55%; background-color: var(--c1); z-index: 3; }

        .num-wrapper {
            position: absolute;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .num-content {
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            transition: transform 2.5s cubic-bezier(0.1, 0.8, 0.1, 1);
        }

        .ring-1 .num-content { font-size: clamp(1rem, 3.5vw, 1.5rem); }

        .hub {
            position: absolute;
            width: 12%;
            height: 12%;
            background: #fff;
            border-radius: 50%;
            z-index: 20;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
        }

        /* Animations */
        @keyframes rotate-cw { 100% { transform: rotate(360deg); } }
        @keyframes rotate-ccw { 100% { transform: rotate(-360deg); } }

        .spinning .ring-1 { animation: rotate-ccw 1s linear infinite; }
        .spinning .ring-2 { animation: rotate-cw 1.5s linear infinite; }
        .spinning .ring-1 .num-content { animation: rotate-cw 1s linear infinite; }
        .spinning .ring-2 .num-content { animation: rotate-ccw 1.5s linear infinite; }

        /* àª¨à«€àªšà«‡àª¨à«‹ àª•àª‚àªŸà«àª°à«‹àª² àªàª°àª¿àª¯àª¾ */
        .bottom-section {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
            flex-shrink: 0;
        }

        .result-area {
            background: white;
            padding: 5px 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            width: 80%;
            max-width: 300px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-title { font-size: 0.9rem; color: #747d8c; }
        .result-value { font-size: 2.2rem; color: var(--text); font-weight: bold; letter-spacing: 5px; margin: 0; line-height: 1.1; }
        .result-text { font-size: 1.1rem; color: #57606f; margin-top: 2px; }

        button {
            padding: 12px 0;
            width: 70%;
            max-width: 250px;
            font-size: 1.4rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Rasa', serif;
            font-weight: bold;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
            transition: all 0.1s;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        button:active { transform: translateY(3px); box-shadow: none; }
        .btn-spin { background-color: #2ED573; }
        .btn-stop { background-color: #FF4757; }
        button:disabled { background-color: #ccc; box-shadow: none; }

        #confetti-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 100;
        }

        /* àª¨àª¾àª¨à«€ àª¸à«àª•à«àª°à«€àª¨ àª®àª¾àªŸà«‡ */
        @media (max-height: 600px) {
            h1 { font-size: 1.5rem; }
            .bottom-section { gap: 8px; padding-bottom: 10px; }
            button { padding: 8px 0; font-size: 1.2rem; }
            .result-value { font-size: 1.8rem; }
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ¡ àª¨àª‚àª¬àª° àªµà«àª¹à«€àª² ğŸ¡</h1>
        <div class="author-text">Created by: Rajesh Barochia</div>
    </header>

    <div class="game-wrapper" id="gameWrapper">
        <div class="indicator-box"></div>
        <div class="arrow">ğŸ”»</div>

        <div class="ring ring-2" id="ring2"></div>
        <div class="ring ring-1" id="ring1"></div>
        
        <div class="hub"></div>
    </div>

    <div class="bottom-section">
        <div class="result-area">
            <div class="result-title">àª¤àª®àª¾àª°à«‹ àª¨àª‚àª¬àª°:</div>
            <div class="result-value" id="resultDisplay">--</div>
            <div class="result-text" id="resultText"></div>
        </div>

        <button class="btn-spin" id="toggleBtn" onclick="toggleSpin()">ğŸš€ àª«à«‡àª°àªµà«‹</button>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <script>
        const digits = ['à«¦', 'à«§', 'à«¨', 'à«©', 'à«ª', 'à««', 'à«¬', 'à«­', 'à«®', 'à«¯'];
        
        // 0-99 Gujarati Numbers for correct pronunciation
        const fullNumbers = {
            0: "àª¶à«‚àª¨à«àª¯", 1: "àªàª•", 2: "àª¬à«‡", 3: "àª¤à«àª°àª£", 4: "àªšàª¾àª°", 5: "àªªàª¾àª‚àªš", 6: "àª›", 7: "àª¸àª¾àª¤", 8: "àª†àª ", 9: "àª¨àªµ", 10: "àª¦àª¸",
            11: "àª…àª—àª¿àª¯àª¾àª°", 12: "àª¬àª¾àª°", 13: "àª¤à«‡àª°", 14: "àªšà«Œàª¦", 15: "àªªàª‚àª¦àª°", 16: "àª¸à«‹àª³", 17: "àª¸àª¤à«àª¤àª°", 18: "àª…àª¢àª¾àª°", 19: "àª“àª—àª£à«€àª¸", 20: "àªµà«€àª¸",
            21: "àªàª•àªµà«€àª¸", 22: "àª¬àª¾àªµà«€àª¸", 23: "àª¤à«àª°à«‡àªµà«€àª¸", 24: "àªšà«‹àªµà«€àª¸", 25: "àªªàªšà«€àª¸", 26: "àª›àªµà«àªµà«€àª¸", 27: "àª¸àª¤à«àª¤àª¾àªµà«€àª¸", 28: "àª…àª à«àª àª¾àªµà«€àª¸", 29: "àª“àª—àª£àª¤à«àª°à«€àª¸", 30: "àª¤à«àª°à«€àª¸",
            31: "àªàª•àª¤à«àª°à«€àª¸", 32: "àª¬àª¤à«àª°à«€àª¸", 33: "àª¤à«‡àª‚àª¤à«àª°à«€àª¸", 34: "àªšà«‹àª¤à«àª°à«€àª¸", 35: "àªªàª¾àª‚àª¤à«àª°à«€àª¸", 36: "àª›àª¤à«àª°à«€àª¸", 37: "àª¸àª¾àª¡àª¤à«àª°à«€àª¸", 38: "àª†àª¡àª¤à«àª°à«€àª¸", 39: "àª“àª—àª£àªšàª¾àª²à«€àª¸", 40: "àªšàª¾àª²à«€àª¸",
            41: "àªàª•àª¤àª¾àª²à«€àª¸", 42: "àª¬à«‡àª¤àª¾àª²à«€àª¸", 43: "àª¤àª¾àª²à«€àª¸", 44: "àªšà«àª‚àª®àª¾àª²à«€àª¸", 45: "àªªàª¿àª¸à«àª¤àª¾àª²à«€àª¸", 46: "àª›à«‡àª¤àª¾àª²à«€àª¸", 47: "àª¸à«àª¡àª¤àª¾àª²à«€àª¸", 48: "àª…àª¡àª¤àª¾àª²à«€àª¸", 49: "àª“àª—àª£àªªàªšàª¾àª¸", 50: "àªªàªšàª¾àª¸",
            51: "àªàª•àª¾àªµàª¨", 52: "àª¬àª¾àªµàª¨", 53: "àª¤à«àª°à«‡àªªàª¨", 54: "àªšà«‹àªªàª¨", 55: "àªªàª‚àªšàª¾àªµàª¨", 56: "àª›àªªà«àªªàª¨", 57: "àª¸àª¤à«àª¤àª¾àªµàª¨", 58: "àª…àª à«àª àª¾àªµàª¨", 59: "àª“àª—àª£àª¸àª¾àª ", 60: "àª¸àª¾àª ",
            61: "àªàª•àª¸àª ", 62: "àª¬àª¾àª¸àª ", 63: "àª¤à«àª°à«‡àª¸àª ", 64: "àªšà«‹àª¸àª ", 65: "àªªàª¾àª¸àª ", 66: "àª›àª¾àª¸àª ", 67: "àª¸àª¡àª¸àª ", 68: "àª…àª¡àª¸àª ", 69: "àª“àª—àª£àª¸àª¿àª¤à«àª¤à«‡àª°", 70: "àª¸àª¿àª¤à«àª¤à«‡àª°",
            71: "àªàª•à«‹àª¤à«‡àª°", 72: "àª¬àª¹à«‹àª¤à«‡àª°", 73: "àª¤à«‹àª¤à«‡àª°", 74: "àªšà«àª®à«‹àª¤à«‡àª°", 75: "àªªàª‚àªšà«‹àª¤à«‡àª°", 76: "àª›à«‹àª¤à«‡àª°", 77: "àª¸àª¿àª¤à«àª¤à«‹àª¤à«‡àª°", 78: "àª‡àª à«àª à«‹àª¤à«‡àª°", 79: "àª“àª—àª£àªàª‚àª¸à«€", 80: "àªàª‚àª¸à«€",
            81: "àªàª•à«àª¯àª¾àª¸à«€", 82: "àª¬à«àª¯àª¾àª¸à«€", 83: "àª¤à«àª¯àª¾àª¸à«€", 84: "àªšà«‹àª°à«àª¯àª¾àª¸à«€", 85: "àªªàª‚àªšàª¾àª¸à«€", 86: "àª›à«àª¯àª¾àª¸à«€", 87: "àª¸àª¤à«àª¯àª¾àª¸à«€", 88: "àª…àª à«àª¯àª¾àª¸à«€", 89: "àª“àª—àª£àª¨à«‡àªµà«àª‚", 90: "àª¨à«‡àªµà«àª‚",
            91: "àªàª•à«àª¯àª¾àª£à«àª‚", 92: "àª¬àª¾àª£à«àª‚", 93: "àª¤à«àª°àª¾àª£à«àª‚", 94: "àªšà«‹àª°àª¾àª£à«àª‚", 95: "àªªàª‚àªšàª¾àª£à«àª‚", 96: "àª›àª¨à«àª¨à«àª‚", 97: "àª¸àª¤à«àª¤àª¾àª£à«àª‚", 98: "àª…àª à«àª àª¾àª£à«àª‚", 99: "àª¨àªµà«àªµàª¾àª£à«àª‚"
        };

        const rings = [
            { id: 'ring1', radiusPercent: 20 }, // 55% width / 2 approx
            { id: 'ring2', radiusPercent: 42 }  // 100% width / 2 approx
        ];

        let isSpinning = false;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(freq, type, duration) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.type = type;
            osc.frequency.value = freq;
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function init() {
            // Calculate sizes based on the container size dynamically
            const wrapper = document.getElementById('gameWrapper');
            const size = wrapper.offsetWidth;

            rings.forEach(ring => {
                const el = document.getElementById(ring.id);
                // Radius = size * percentage
                const r = size * (ring.radiusPercent / 100);
                
                for (let i = 0; i < 10; i++) {
                    const wrapperDiv = document.createElement('div');
                    wrapperDiv.className = 'num-wrapper';
                    const content = document.createElement('div');
                    content.className = 'num-content';
                    content.innerText = digits[i];
                    
                    const angle = i * 36;
                    const rad = (angle - 90) * (Math.PI / 180); 
                    // Adjust radius slightly inwards for text placement
                    const x = r * Math.cos(rad); 
                    const y = r * Math.sin(rad);

                    wrapperDiv.style.transform = `translate(${x}px, ${y}px)`;
                    wrapperDiv.appendChild(content);
                    el.appendChild(wrapperDiv);
                }
                ring.el = el; // Store element ref
            });
        }

        function toggleSpin() {
            const btn = document.getElementById('toggleBtn');
            const resDisplay = document.getElementById('resultDisplay');
            const resText = document.getElementById('resultText');

            if (!isSpinning) {
                isSpinning = true;
                btn.innerText = "ğŸ›‘ àª¥à«‹àª­à«‹";
                btn.classList.remove('btn-spin');
                btn.classList.add('btn-stop');
                document.getElementById('gameWrapper').classList.add('spinning');
                resDisplay.innerText = "--";
                resText.innerText = "";
                
                rings.forEach(r => {
                    r.el.style.transform = '';
                    Array.from(r.el.getElementsByClassName('num-content')).forEach(c => c.style.transform = '');
                });
                playTone(400, 'square', 0.1);

            } else {
                isSpinning = false;
                btn.disabled = true;
                document.getElementById('gameWrapper').classList.remove('spinning');

                let generatedDigits = [];
                rings.forEach((ring, index) => {
                    const winningDigit = Math.floor(Math.random() * 10);
                    generatedDigits.push(winningDigit);
                    
                    const angleNeeded = -1 * (winningDigit * 36);
                    // Add extra spins based on index
                    const totalRotation = angleNeeded - (1080 + (index * 360)); 
                    
                    ring.el.style.transform = `rotate(${totalRotation}deg)`;
                    
                    const counterRotation = -1 * totalRotation;
                    Array.from(ring.el.getElementsByClassName('num-content')).forEach(num => {
                        num.style.transform = `rotate(${counterRotation}deg)`;
                    });
                });

                // Index 0 is inner (units?), Index 1 is outer (tens?)
                // Based on previous code: ring1 is inner, ring2 is outer.
                // Usually ring1 (inner) is units, ring2 (outer) is tens.
                // Let's assume: Ring 2 (Outer) = Tens, Ring 1 (Inner) = Units
                const tens = generatedDigits[1];
                const units = generatedDigits[0];
                const finalNumber = tens * 10 + units;
                
                const displayString = digits[tens] + digits[units];
                
                playTone(600, 'sine', 0.2);

                setTimeout(() => {
                    resDisplay.innerText = displayString;
                    const word = fullNumbers[finalNumber];
                    resText.innerText = word;

                    btn.disabled = false;
                    btn.innerText = "ğŸš€ àª«à«‡àª°àªµà«‹";
                    btn.classList.remove('btn-stop');
                    btn.classList.add('btn-spin');
                    
                    playTone(800, 'triangle', 0.5); 
                    speakResult(word);
                    fireConfetti();
                }, 2600);
            }
        }

        function speakResult(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance();
            msg.text = "àª¤àª®àª¾àª°à«‹ àª¨àª‚àª¬àª° àª›à«‡ " + text; 
            msg.lang = 'gu-IN';
            msg.rate = 0.9;
            window.speechSynthesis.speak(msg);
        }

        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];
            for(let i=0; i<80; i++) {
                particles.push({
                    x: canvas.width/2, y: canvas.height/2,
                    vx: (Math.random()-0.5)*15, vy: (Math.random()-0.5)*15,
                    color: `hsl(${Math.random()*360}, 100%, 50%)`, life: 100
                });
            }
            function update() {
                ctx.clearRect(0,0,canvas.width, canvas.height);
                particles.forEach((p, index) => {
                    p.x += p.vx; p.y += p.vy; p.vy += 0.5; p.life--;
                    ctx.fillStyle = p.color; ctx.beginPath();
                    ctx.arc(p.x, p.y, 5, 0, Math.PI*2); ctx.fill();
                    if(p.life <= 0) particles.splice(index, 1);
                });
                if(particles.length > 0) requestAnimationFrame(update);
            }
            update();
        }

        // Initialize on load to ensure sizes are correct
        window.onload = init;
    </script>
</body>
</html>

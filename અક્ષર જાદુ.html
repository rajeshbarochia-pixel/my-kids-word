<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>àª…àª•à«àª·àª° àªœàª¾àª¦à«: àª…àª•à«àª·àª° àª«àªŸàª¾àª•àª¡àª¾</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light grey background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 0; 
            overflow: hidden; 
        }

        .game-container {
            position: relative;
            width: 100%;
            /* Increased max-width for better tablet/desktop appearance while maintaining the centered look */
            max-width: 768px; 
            height: 100vh; 
            max-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end; 
            background: linear-gradient(45deg, #a7c7e7, #b3ffb3, #ffffa0, #ffb3ff); 
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite; 
            border-radius: 0; 
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4); 
            padding-bottom: 0; 
        }

        @keyframes gradientShift {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }
        
        /* Projection Character - Now a Platform for the Emoji */
        .projection-tube {
            position: relative;
            width: 120px; 
            height: 120px; 
            background: linear-gradient(to top, rgba(180, 180, 180, 0.9), rgba(250, 250, 250, 1));
            border-radius: 50%; 
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.8);
            z-index: 10;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.3s;
            display: flex;
            align-items: center; 
            justify-content: center;
            padding-bottom: 0;
            margin-bottom: -60px; 
        }
        
        /* The Emoji itself */
        .emoji-pot {
            font-size: 6rem; 
            line-height: 1;
            transform: translateY(-10px); 
        }

        .projection-tube:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 255, 255, 1), inset 0 0 15px rgba(0, 0, 0, 0.4);
        }
        
        .projection-tube:active {
            transform: scale(0.98);
        }

        .sky-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; 
        }

        .letter {
            position: absolute;
            font-size: 2.8rem; 
            font-weight: 900; 
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.1);
            /* Slower transition speed for a grander effect */
            transition: all 4s ease-out, opacity 4s ease-out, transform 4s ease-out; 
            text-shadow: 
                1px 1px 0 #fff, 
                -1px -1px 0 #fff, 
                1px -1px 0 #fff, 
                -1px 1px 0 #fff,
                0 0 10px currentColor; 
            will-change: transform, opacity;
        }

        .particle {
            position: absolute;
            background-color: currentColor; 
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.1);
            transition: all 3s ease-out, opacity 3s ease-out, transform 3s ease-out; 
            will-change: transform, opacity;
        }

        .title-text {
            color: #333; 
            text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.6);
        }
        
        .message-text {
            color: #2c5282; 
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }

    </style>
</head>
<body class="select-none">

    <div class="game-container">
        
        <div class="text-center mb-6 absolute top-4 w-full px-4">
            <h1 class="text-4xl sm:text-5xl font-extrabold title-text">àª…àª•à«àª·àª° àªœàª¾àª¦à«</h1>
            <p class="text-sm text-gray-700 mt-1">Creative by: Rajesh Barochia</p>
            <p class="text-base text-gray-600 mt-2">àªªàª¾àª¤à«àª° àªªàª° àª•à«àª²àª¿àª• àª•àª°à«‹ àª…àª¨à«‡ àª…àª•à«àª·àª°à«‹àª¨à«‡ àª«à«‡àª²àª¾àª¤àª¾ àªœà«àª“.</p>
            <p id="message-text" class="text-lg font-bold message-text mt-4 h-6"></p>
        </div>

        <div id="sky-area" class="sky-area">
            <!-- Letters and particles will appear here -->
        </div>

        <!-- Jug/Pitcher Character (Now using Emoji) -->
        <div id="projection-base" class="projection-tube">
            <span class="emoji-pot" aria-label="Pot or Jug Emoji" role="img">ğŸº</span>
        </div>

    </div>

    <script>
        // Gujarati letters collection
        const GUJARATI_LETTERS = ['àª¨', 'àª®', 'àª—', 'àªœ', 'àª•', 'àª°', 'àª²', 'àªµ', 'àªª', 'àª¯', 'àª¶', 'àª¹', 'àª…', 'àª‡', 'àª‰', 'àª', 'àª“', 'àª‹'];
        let letterIndex = 0;

        // Spark colors - Made slightly darker/more saturated for better visibility
        const SPARK_COLORS = [
            '#FF4747', '#477EFF', '#47FF47', '#FFFF47', 
            '#FF47FF', '#FFFFFF', '#FF8C00', '#9932CC',
        ];
        
        // DOM elements
        const baseCube = document.getElementById('projection-base');
        const skyArea = document.getElementById('sky-area');
        const messageText = document.getElementById('message-text');

        // Get position of the character's top opening
        function getBasePosition() {
            const rect = baseCube.getBoundingClientRect();
            const containerRect = skyArea.getBoundingClientRect();
            
            // Calculate initial position relative to the skyArea
            const baseTop = rect.top - containerRect.top;
            const baseCenterX = rect.left + rect.width / 2 - containerRect.left;

            // Adjust the emission point higher, near the top of the emoji (approx -60px from baseTop)
            return {
                x: baseCenterX,
                y: baseTop - 60 
            };
        }

        // Get random float between min and max
        function getRandomFloat(min, max) {
            return Math.random() * (max - min) + min;
        }

        // Get random integer between min and max
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Create and animate the letter spark
        function createLetterSpark(basePos, letter, color) {
            
            const letterEl = document.createElement('div');
            letterEl.textContent = letter;
            letterEl.className = 'letter';
            letterEl.style.color = color;

            // 1. Set initial position (top of the character)
            letterEl.style.left = `${basePos.x}px`;
            letterEl.style.top = `${basePos.y}px`;
            letterEl.style.opacity = '1';
            letterEl.style.transform = 'translate(-50%, -50%) scale(1)';

            skyArea.appendChild(letterEl);

            // 2. Calculate final animation targets based on container size (Responsive logic)
            const containerRect = skyArea.getBoundingClientRect();
            const containerWidth = containerRect.width;
            const containerHeight = containerRect.height;
            
            // Horizontal spread: 25% to 60% of container width (spread from center)
            const horizontalOffset = getRandomFloat(0.25, 0.6) * containerWidth * (Math.random() > 0.5 ? 1 : -1);
            // Vertical rise: 50% to 80% of container height (always upwards)
            const verticalOffset = getRandomFloat(0.5, 0.8) * containerHeight;

            const targetX = basePos.x + horizontalOffset; 
            const targetY = basePos.y - verticalOffset; 
            const targetRotation = getRandomInt(-720, 720); 
            
            // 3. Start animation transition
            setTimeout(() => {
                letterEl.style.left = `${targetX}px`;
                letterEl.style.top = `${targetY}px`;
                letterEl.style.opacity = '0';
                letterEl.style.fontSize = `${getRandomInt(35, 60)}px`; // Larger spread in size
                letterEl.style.transitionDuration = '4s'; 
                letterEl.style.transform = `translate(-50%, -50%) scale(1.8) rotate(${targetRotation}deg)`;
            }, 50); 

            // 4. Remove element after transition completes (4s)
            setTimeout(() => {
                letterEl.remove();
            }, 4000);
        }

        // Create and animate the particle
        function createParticle(basePos, color) {
            const particleEl = document.createElement('div');
            particleEl.className = 'particle';
            particleEl.style.backgroundColor = color;
            particleEl.style.width = `${getRandomInt(5, 10)}px`;
            particleEl.style.height = particleEl.style.width;
            
            particleEl.style.left = `${basePos.x}px`;
            particleEl.style.top = `${basePos.y}px`;
            particleEl.style.opacity = '1';
            particleEl.style.transform = 'translate(-50%, -50%) scale(1)';

            skyArea.appendChild(particleEl);

            const containerRect = skyArea.getBoundingClientRect();
            const containerWidth = containerRect.width;
            const containerHeight = containerRect.height;

            // Particle movement relative to container size
            const horizontalOffset = getRandomFloat(0.15, 0.4) * containerWidth * (Math.random() > 0.5 ? 1 : -1);
            const verticalOffset = getRandomFloat(0.3, 0.6) * containerHeight;

            const targetX = basePos.x + horizontalOffset; 
            const targetY = basePos.y - verticalOffset; 
            const targetScale = getRandomFloat(0.5, 1.5);

            setTimeout(() => {
                particleEl.style.left = `${targetX}px`;
                particleEl.style.top = `${targetY}px`;
                particleEl.style.opacity = '0';
                particleEl.style.transitionDuration = '3s'; 
                particleEl.style.transform = `translate(-50%, -50%) scale(${targetScale})`;
            }, 50);

            setTimeout(() => {
                particleEl.remove();
            }, 3000);
        }

        // Character click handler
        let clickTimeout = null;
        let isProcessing = false;

        function handleCubeClick(event) {
            // Prevent double click/touch while processing
            if (isProcessing) return;
            isProcessing = true;
            
            // Optional: Prevent default touch action (like scrolling)
            if (event.type === 'touchstart') {
                event.preventDefault();
            }

            const basePos = getBasePosition();
            
            const currentLetter = GUJARATI_LETTERS[letterIndex];
            
            letterIndex = (letterIndex + 1) % GUJARATI_LETTERS.length;
            
            messageText.textContent = `àª…àª•à«àª·àª° '${currentLetter}' àª¬àª¹àª¾àª° àª¨à«€àª•àª³à«àª¯à«‹!`;
            
            // Create 6 to 9 copies of the letter for starburst effect
            const sparkCount = getRandomInt(6, 9);
            
            for (let i = 0; i < sparkCount; i++) {
                const sparkColor = SPARK_COLORS[getRandomInt(0, SPARK_COLORS.length - 1)];
                setTimeout(() => {
                    createLetterSpark(basePos, currentLetter, sparkColor);
                }, i * 40); // Slightly faster initial burst
            }

            // Create 15-25 small particles for effect
            const particleCount = getRandomInt(15, 25);
            for (let i = 0; i < particleCount; i++) {
                const particleColor = SPARK_COLORS[getRandomInt(0, SPARK_COLORS.length - 1)];
                setTimeout(() => {
                    createParticle(basePos, particleColor);
                }, i * 20); // Faster particle burst
            }

            // Re-enable clicks after the burst has started
            setTimeout(() => {
                isProcessing = false;
            }, 500); // Short delay to prevent spamming
        }

        // Event Listeners
        baseCube.addEventListener('click', handleCubeClick);
        // Use passive: false for touchstart if preventing default, but here we only prevent default inside the handler
        baseCube.addEventListener('touchstart', handleCubeClick);
        
        // Initial message on load
        window.onload = () => {
            messageText.textContent = 'àª°àª®àªµàª¾àª¨à«àª‚ àª¶àª°à«‚ àª•àª°àªµàª¾ àª®àª¾àªŸà«‡ àª¨à«€àªšà«‡àª¨àª¾ àªªàª¾àª¤à«àª°àª¨à«‡ àªŸàªš àª•àª°à«‹.';
        };
        
    </script>
</body>
</html>

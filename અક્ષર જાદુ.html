<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>àª…àª•à«àª·àª° àªœàª¾àª¦à«: àª…àª•à«àª·àª° àª«àªŸàª¾àª•àª¡àª¾</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            margin: 0;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 768px;
            height: 90vh;
            max-height: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(45deg, #a7c7e7, #b3ffb3, #ffffa0, #ffb3ff);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            overflow: hidden;
        }

        @keyframes gradientShift {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }
        
        .header-area {
            width: 100%;
            padding: 1rem;
            text-align: center;
            z-index: 20;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .footer-area {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            z-index: 20;
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
        }
        
        .projection-tube {
            position: relative;
            width: 120px;
            height: 120px;
            background: linear-gradient(to top, rgba(180, 180, 180, 0.9), rgba(250, 250, 250, 1));
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
        }
        
        .emoji-pot {
            font-size: 6rem;
            line-height: 1;
            transform: translateY(-10px);
            transition: transform 0.2s;
        }

        .projection-tube:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 255, 255, 1), inset 0 0 15px rgba(0, 0, 0, 0.4);
        }
        
        .projection-tube:active, .projection-tube.active {
            transform: scale(0.95);
        }
        
        .projection-tube:active .emoji-pot, .projection-tube.active .emoji-pot {
            transform: translateY(-5px);
        }

        .sky-area {
            position: relative;
            width: 100%;
            flex: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .letter {
            position: absolute;
            font-size: 2.8rem;
            font-weight: 900;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.1);
            transition: all 4s ease-out, opacity 4s ease-out, transform 4s ease-out;
            text-shadow: 
                1px 1px 0 #fff, 
                -1px -1px 0 #fff, 
                1px -1px 0 #fff, 
                -1px 1px 0 #fff,
                0 0 10px currentColor;
            will-change: transform, opacity;
            user-select: none;
        }

        .particle {
            position: absolute;
            background-color: currentColor;
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.1);
            transition: all 3s ease-out, opacity 3s ease-out, transform 3s ease-out;
            will-change: transform, opacity;
        }

        .title-text {
            color: #333;
            text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.6);
        }
        
        .message-text {
            color: #2c5282;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
            min-height: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .score-display {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 30;
        }
        
        @media (max-width: 640px) {
            .game-container {
                height: 95vh;
                max-height: none;
                border-radius: 12px;
            }
            
            .header-area h1 {
                font-size: 1.8rem;
            }
            
            .projection-tube {
                width: 100px;
                height: 100px;
            }
            
            .emoji-pot {
                font-size: 5rem;
            }
            
            .letter {
                font-size: 2.2rem;
            }
        }
        
        @media (max-height: 600px) {
            .game-container {
                height: 98vh;
            }
            
            .header-area {
                padding: 0.5rem;
            }
            
            .footer-area {
                padding: 1rem;
            }
            
            .projection-tube {
                width: 90px;
                height: 90px;
            }
            
            .emoji-pot {
                font-size: 4rem;
            }
        }

    </style>
</head>
<body class="select-none">

    <div class="game-container">
        
        <!-- àªŸà«‹àªšàª¨à«‹ àª®àª¾àª¹àª¿àª¤à«€ àªµàª¿àª¸à«àª¤àª¾àª° -->
        <div id="header-area" class="header-area">
            <h1 class="text-4xl sm:text-5xl font-extrabold title-text">àª…àª•à«àª·àª° àªœàª¾àª¦à«</h1>
            <p class="text-sm text-gray-700 mt-1">Creative by: Rajesh Barochia</p>
            <p class="text-base text-gray-600 mt-2">àªªàª¾àª¤à«àª° àªªàª° àª•à«àª²àª¿àª• àª•àª°à«‹ àª…àª¨à«‡ àª…àª•à«àª·àª°à«‹àª¨à«‡ àª«à«‡àª²àª¾àª¤àª¾ àªœà«àª“.</p>
            <p id="message-text" class="text-lg font-bold message-text mt-4"></p>
        </div>

        <!-- àª¸à«àª•à«‹àª° àª¡àª¿àª¸à«àªªà«àª²à«‡ -->
        <div id="score-display" class="score-display">
            àª¸à«àª•à«‹àª°: <span id="score-value">0</span>
        </div>

        <!-- àª†àª•àª¾àª¶ àªµàª¿àª¸à«àª¤àª¾àª° -->
        <div id="sky-area" class="sky-area">
            <!-- Letters and particles will appear here -->
        </div>

        <!-- àªªàª¾àª¤à«àª° àª®àª¾àªŸà«‡àª¨à«‹ àªµàª¿àª¸à«àª¤àª¾àª° -->
        <div id="footer-area" class="footer-area">
            <div id="projection-base" class="projection-tube">
                <span class="emoji-pot" aria-label="Pot or Jug Emoji" role="img">ğŸº</span>
            </div>
        </div>

    </div>

    <script>
        // Gujarati letters collection
        const GUJARATI_LETTERS = ['àª¨', 'àª®', 'àª—', 'àªœ', 'àª•', 'àª°', 'àª²', 'àªµ', 'àªª', 'àª¯', 'àª¶', 'àª¹', 'àª…', 'àª‡', 'àª‰'];
        
        // Spark colors
        const SPARK_COLORS = [
            '#FF4747', '#477EFF', '#47FF47', '#FFFF47', 
            '#FF47FF', '#FFFFFF', '#FF8C00', '#9932CC',
        ];
        
        // DOM elements
        const gameContainer = document.querySelector('.game-container');
        const headerArea = document.getElementById('header-area');
        const footerArea = document.getElementById('footer-area');
        const baseCube = document.getElementById('projection-base');
        const skyArea = document.getElementById('sky-area');
        const messageText = document.getElementById('message-text');
        const scoreDisplay = document.getElementById('score-value');

        // Game state
        let isProcessing = false;
        let score = 0;
        let activeLetters = [];
        let lastTapTime = 0;
        const TAP_DELAY = 300; // milliseconds

        /**
         * àª•àª¨à«àªŸà«‡àª¨àª°àª¨à«€ àªŠàª‚àªšàª¾àªˆàª¨à«€ àª—àª£àª¤àª°à«€ àª•àª°à«‡ àª›à«‡ àª…àª¨à«‡ sky-area àª¨à«€ àªŠàª‚àªšàª¾àªˆ àª¸à«‡àªŸ àª•àª°à«‡ àª›à«‡
         */
        function adjustSkyAreaHeight() {
            const totalHeight = gameContainer.clientHeight;
            const headerHeight = headerArea.offsetHeight;
            const footerHeight = footerArea.offsetHeight;
            
            const skyHeight = totalHeight - headerHeight - footerHeight;

            if (skyHeight > 0) {
                skyArea.style.height = `${skyHeight}px`;
            } else {
                skyArea.style.height = '100px';
            }
        }

        // àªªàª¾àª¤à«àª°àª¨àª¾ àª‰àª¤à«àª¸àª°à«àªœàª¨ àª¬àª¿àª‚àª¦à«àª¨à«€ àª¸à«àª¥àª¿àª¤àª¿ àª®à«‡àª³àªµà«‹
        function getBasePosition() {
            const rect = baseCube.getBoundingClientRect();
            const skyRect = skyArea.getBoundingClientRect();
            
            const baseCenterY = rect.top + rect.height / 2 - skyRect.top;
            const baseCenterX = rect.left + rect.width / 2 - skyRect.left;

            return {
                x: baseCenterX,
                y: baseCenterY - 60
            };
        }

        // Get random float between min and max
        function getRandomFloat(min, max) {
            return Math.random() * (max - min) + min;
        }

        // Get random integer between min and max
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // àª…àª•à«àª·àª° àª¸à«àªªàª¾àª°à«àª• àª¬àª¨àª¾àªµà«‡ àª›à«‡ àª…àª¨à«‡ àªàª¨àª¿àª®à«‡àªŸ àª•àª°à«‡ àª›à«‡
        function createLetterSpark(basePos, letter, color) {
            const letterEl = document.createElement('div');
            letterEl.textContent = letter;
            letterEl.className = 'letter';
            letterEl.style.color = color;
            letterEl.dataset.letterId = Date.now() + Math.random();
            
            activeLetters.push(letterEl.dataset.letterId);
            
            letterEl.style.left = `${basePos.x}px`;
            letterEl.style.top = `${basePos.y}px`;
            letterEl.style.opacity = '1';
            letterEl.style.transform = 'translate(-50%, -50%) scale(1)';

            skyArea.appendChild(letterEl);

            const skyRect = skyArea.getBoundingClientRect();
            const skyWidth = skyRect.width;
            const skyHeight = skyRect.height;
            
            const horizontalOffset = getRandomFloat(0.25, 0.6) * skyWidth * (Math.random() > 0.5 ? 1 : -1);
            const verticalOffset = getRandomFloat(0.5, 0.8) * skyHeight;
            
            const targetX = basePos.x + horizontalOffset; 
            const targetY = basePos.y - verticalOffset; 
            const targetRotation = getRandomInt(-720, 720); 
            
            setTimeout(() => {
                letterEl.style.left = `${targetX}px`;
                letterEl.style.top = `${targetY}px`;
                letterEl.style.opacity = '0';
                letterEl.style.fontSize = `${getRandomInt(35, 60)}px`;
                letterEl.style.transitionDuration = '4s';
                letterEl.style.transform = `translate(-50%, -50%) scale(1.8) rotate(${targetRotation}deg)`;
            }, 50);

            setTimeout(() => {
                const index = activeLetters.indexOf(letterEl.dataset.letterId);
                if (index > -1) {
                    activeLetters.splice(index, 1);
                }
                letterEl.remove();
            }, 4000);
        }

        // àª•àª£ (particle) àª¬àª¨àª¾àªµà«‡ àª›à«‡ àª…àª¨à«‡ àªàª¨àª¿àª®à«‡àªŸ àª•àª°à«‡ àª›à«‡
        function createParticle(basePos, color) {
            const particleEl = document.createElement('div');
            particleEl.className = 'particle';
            particleEl.style.backgroundColor = color;
            particleEl.style.width = `${getRandomInt(5, 10)}px`;
            particleEl.style.height = particleEl.style.width;
            
            particleEl.style.left = `${basePos.x}px`;
            particleEl.style.top = `${basePos.y}px`;
            particleEl.style.opacity = '1';
            particleEl.style.transform = 'translate(-50%, -50%) scale(1)';

            skyArea.appendChild(particleEl);

            const skyRect = skyArea.getBoundingClientRect();
            const skyWidth = skyRect.width;

            const horizontalOffset = getRandomFloat(0.15, 0.4) * skyWidth * (Math.random() > 0.5 ? 1 : -1);
            const verticalOffset = getRandomFloat(0.3, 0.6) * skyRect.height;

            const targetX = basePos.x + horizontalOffset; 
            const targetY = basePos.y - verticalOffset; 
            const targetScale = getRandomFloat(0.5, 1.5);

            setTimeout(() => {
                particleEl.style.left = `${targetX}px`;
                particleEl.style.top = `${targetY}px`;
                particleEl.style.opacity = '0';
                particleEl.style.transitionDuration = '3s';
                particleEl.style.transform = `translate(-50%, -50%) scale(${targetScale})`;
            }, 50);

            setTimeout(() => {
                particleEl.remove();
            }, 3000);
        }

        // àª¸à«àª•à«‹àª° àª…àªªàª¡à«‡àªŸ àª•àª°à«‹
        function updateScore(points) {
            score += points;
            scoreDisplay.textContent = score;
            
            // àª¸à«àª•à«‹àª° àª¬àª¦àª²àª¾àªµàª¾àª¨à«€ àªàª¨àª¿àª®à«‡àª¶àª¨
            scoreDisplay.parentElement.style.transform = 'scale(1.1)';
            setTimeout(() => {
                scoreDisplay.parentElement.style.transform = 'scale(1)';
            }, 200);
        }

        // àªªàª¾àª¤à«àª° àª•à«àª²àª¿àª• àª¹à«‡àª¨à«àª¡àª²àª°
        function handleCubeClick(event) {
            // àª¡àª¬àª²-àªŸà«‡àªª àª…àªŸàª•àª¾àªµàªµàª¾ àª®àª¾àªŸà«‡
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTapTime;
            if (tapLength < TAP_DELAY && tapLength > 0) {
                return;
            }
            lastTapTime = currentTime;
            
            if (isProcessing) return;
            isProcessing = true;
            
            if (event.type === 'touchstart') {
                event.preventDefault();
            }
            
            // àªàª•à«àªŸàª¿àªµ àª¸à«àªŸà«‡àªŸ àª‰àª®à«‡àª°à«‹
            baseCube.classList.add('active');
            
            const basePos = getBasePosition();
            
            const randomIndex = getRandomInt(0, GUJARATI_LETTERS.length - 1);
            const currentLetter = GUJARATI_LETTERS[randomIndex];
            
            messageText.textContent = `àª…àª•à«àª·àª° '${currentLetter}' àª¬àª¹àª¾àª° àª¨à«€àª•àª³à«àª¯à«‹!`;
            messageText.style.opacity = '1';
            
            // àª¸à«àª•à«‹àª° àª…àªªàª¡à«‡àªŸ àª•àª°à«‹
            updateScore(10);
            
            const sparkCount = getRandomInt(6, 9);
            
            for (let i = 0; i < sparkCount; i++) {
                const sparkColor = SPARK_COLORS[getRandomInt(0, SPARK_COLORS.length - 1)];
                setTimeout(() => {
                    createLetterSpark(basePos, currentLetter, sparkColor);
                }, i * 40);
            }

            const particleCount = getRandomInt(15, 25);
            for (let i = 0; i < particleCount; i++) {
                const particleColor = SPARK_COLORS[getRandomInt(0, SPARK_COLORS.length - 1)];
                setTimeout(() => {
                    createParticle(basePos, particleColor);
                }, i * 20);
            }

            setTimeout(() => {
                isProcessing = false;
                baseCube.classList.remove('active');
                
                // àª¸àª‚àª¦à«‡àª¶ àª§à«€àª®à«‡ àª§à«€àª®à«‡ àª…àª¦à«ƒàª¶à«àª¯ àª¥àª¾àª¯
                setTimeout(() => {
                    messageText.style.opacity = '0';
                }, 1000);
            }, 500);
        }

        // Event Listeners
        baseCube.addEventListener('click', handleCubeClick);
        baseCube.addEventListener('touchstart', handleCubeClick);
        
        window.addEventListener('resize', adjustSkyAreaHeight);

        // àªªà«‡àªœ àª²à«‹àª¡ àª¥àª¾àª¯ àª¤à«àª¯àª¾àª°à«‡ àªŠàª‚àªšàª¾àªˆ àª¸à«‡àªŸ àª•àª°à«‹ àª…àª¨à«‡ àªªà«àª°àª¾àª°àª‚àª­àª¿àª• àª¸àª‚àª¦à«‡àª¶ àª¸à«‡àªŸ àª•àª°à«‹
        window.onload = () => {
            adjustSkyAreaHeight();
            messageText.textContent = 'àª°àª®àªµàª¾àª¨à«àª‚ àª¶àª°à«‚ àª•àª°àªµàª¾ àª®àª¾àªŸà«‡ àª¨à«€àªšà«‡àª¨àª¾ àªªàª¾àª¤à«àª°àª¨à«‡ àªŸàªš àª•àª°à«‹.';
            messageText.style.opacity = '1';
            
            // 3 àª¸à«‡àª•àª¨à«àª¡ àªªàª›à«€ àª¸àª‚àª¦à«‡àª¶ àª…àª¦à«ƒàª¶à«àª¯ àª¥àª¾àª¯
            setTimeout(() => {
                messageText.style.opacity = '0';
            }, 3000);
        };
        
    </script>
</body>
</html>

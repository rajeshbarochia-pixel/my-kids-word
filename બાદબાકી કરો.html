<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ркмрк╛ркжркмрк╛ркХрлАркирлА рк░ркоркд</title>
    <style>
        /* Base styles */
        body {
            background-color: #f3f4f6; /* gray-100 */
            min-height: 100vh;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
        }

        #app {
            width: 100%;
            max-width: 500px;
            background-color: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* shadow-2xl */
            border-radius: 12px; /* rounded-xl */
            padding: 32px;
        }

        /* Header */
        h1 {
            font-size: 2rem;
            font-weight: 800; /* extra-bold */
            color: #1d4ed8; /* blue-700 */
            text-align: center;
            margin-bottom: 8px; /* Reduced margin */
        }

        .credit {
            text-align: center;
            color: #4b5563; /* gray-600 */
            font-size: 0.75rem; /* text-xs */
            margin-bottom: 16px; 
        }

        .subtitle {
            text-align: center;
            color: #4b5563; /* gray-600 */
            margin-bottom: 24px;
            font-size: 0.875rem; /* text-sm */
        }

        /* Score Card */
        .score-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #eff6ff; /* blue-50 */
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 24px;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06); /* shadow-inner */
        }
        .score-card span:first-child {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600;
            color: #1e40af; /* blue-800 */
        }
        .score-card span:last-child {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700;
            color: #2563eb; /* blue-600 */
        }

        /* Game Problem Row */
        .problem-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: white;
            border-bottom: 1px solid #e5e7eb; /* border-gray-200 */
            padding-top: 12px;
            padding-bottom: 12px;
        }

        /* Question Text */
        .question-text {
            font-size: 1.25rem; /* text-xl */
            font-family: monospace;
            color: #374151; /* gray-800 */
            width: 33.3333%;
            display: flex;
            justify-content: flex-start;
            padding-left: 8px;
        }

        /* Options Container */
        .option-row {
            display: flex;
            justify-content: space-around;
            width: 66.6666%;
        }

        /* Option Circle - Default State */
        .option-circle {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 2px solid #3b82f6; /* Blue border default */
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
            user-select: none;
            flex-shrink: 0;
            margin: 4px;
            color: #374151; /* gray-800 */
            background-color: transparent; /* Default background */
        }

        .option-circle:hover:not(.disabled) {
            background-color: #bfdbfe; /* Light blue on hover */
        }

        .correct {
            background-color: #10b981 !important; /* Emerald 500 */
            color: white !important;
            border-color: #059669 !important;
        }

        .wrong {
            background-color: #ef4444 !important; /* Red 500 */
            color: white !important;
            border-color: #dc2626 !important;
        }

        /* Style for options after an answer has been given */
        .answered-state {
            pointer-events: none;
            opacity: 1; /* Keep full visibility */
        }

        .answered-state:not(.correct):not(.wrong) {
            /* Unselected incorrect options - dull them */
            border-color: #d1d5db !important; /* gray-300 */
            color: #9ca3af !important; /* gray-400 */
            background-color: #f9fafb !important; /* light background */
        }
        
        .disabled {
            pointer-events: none;
        }
        
        /* New Game Button */
        #newGameButton {
            width: 100%;
            padding: 12px 24px;
            background-color: #059669; /* green-600 */
            color: white;
            font-weight: bold;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); /* shadow-md */
            transition: background-color 0.3s, transform 0.3s;
            margin-top: 32px;
        }

        #newGameButton:hover {
            background-color: #047857; /* green-700 */
            transform: scale(1.01);
        }

        /* Message Box Modal */
        #messageBox {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none; /* hidden by default */
            align-items: center;
            justify-content: center;
            padding: 16px;
            z-index: 50;
        }
        .message-content {
            background-color: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* shadow-2xl */
            text-align: center;
            width: 100%;
            max-width: 384px;
            transform: scale(1);
            transition: transform 0.3s;
        }
        #messageTitle {
            font-size: 1.5rem; /* text-2xl */
            font-weight: bold;
            color: #2563eb; /* blue-600 */
            margin-bottom: 12px;
        }
        #messageText {
            color: #374151; /* gray-700 */
            margin-bottom: 16px;
        }
        .message-content button {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        .message-content button:hover {
            background-color: #2563eb; /* blue-600 */
        }
        #messageBox.active {
            display: flex;
        }
    </style>
</head>
<body>

    <div id="app" class="shadow-2xl">
        <!-- рк╢рлАрк░рлНрк╖ркХ (Title) -->
        <h1 id="mainTitle">ркмрк╛ркжркмрк╛ркХрлАркирлА рк░ркоркд</h1>
        <p class="credit">Created by : Rajesh Barochia</p> <!-- ркирк╡рлА ркХрлНрк░рлЗркбрк┐ркЯ рк▓рк╛ркЗрки -->
        <p class="subtitle">рлл ркмрк╛ркжркмрк╛ркХрлАркирк╛ рккрлНрк░рк╢рлНркирлЛркирлЛ ркЬрк╡рк╛ркм рк╡рк┐ркХрк▓рлНрккрлЛркорк╛ркВркерлА рккрк╕ркВркж ркХрк░рлЛ.</p> <!-- рккрлНрк░рк╢рлНркирлЛркирлА рк╕ркВркЦрлНркпрк╛ рлл -->

        <!-- рк╕рлНркХрлЛрк░ ркХрк╛рк░рлНркб (Score Card) -->
        <div class="score-card">
            <span>рк╕рлНркХрлЛрк░:</span>
            <span id="scoreDisplay">рлж / рлл</span> <!-- рккрлНрк░рк╢рлНркирлЛркирлА рк╕ркВркЦрлНркпрк╛ рлл -->
        </div>

        <!-- ркЧрлЗрко ркХркирлНркЯрлЗркирк░ (Game Container) -->
        <div id="gameContainer" class="space-y-4">
            <!-- ркЕрк╣рлАркВ рккрлНрк░рк╢рлНркирлЛ рк░рлЗркирлНркбрк░ ркерк╢рлЗ -->
        </div>

        <!-- ркирк╡рлА ркЧрлЗрко ркмркЯрки (New Game Button) -->
        <div style="text-align: center;">
            <button id="newGameButton">
                ркирк╡рлА рк░ркоркд рк╢рк░рлВ ркХрк░рлЛ
            </button>
        </div>
    </div>

    <!-- ркорлЗрк╕рлЗркЬ ркмрлЛркХрлНрк╕ (Custom Modal for Messages) -->
    <div id="messageBox">
        <div class="message-content">
            <h3 id="messageTitle">рк╢рк╛ркмрк╛рк╢!</h3>
            <p id="messageText">ркдркорлЗ рк╕рклрк│ркдрк╛рккрлВрк░рлНрк╡ркХ ркЧрлЗрко рккрлВрк░рлА ркХрк░рлА. ркдркорк╛рк░рлЛ рк╕рлНркХрлЛрк░ ркЫрлЗ: рло/рлзрлж.</p>
            <button onclick="closeMessageBox()">ркмркВркз ркХрк░рлЛ</button>
        </div>
    </div>

    <script>
        // ркЧрлНрк▓рлЛркмрк▓ рк╡рлЗрк░рк┐ркпрлЗркмрк▓рлНрк╕
        let gameProblems = [];
        const TOTAL_PROBLEMS = 5; // ркЕрк╣рлАркВ рклрлЗрк░рклрк╛рк░ ркХрк░рлНркпрлЛ ркЫрлЗ: 10 ркерлА 5
        let correctCount = 0;
        let gameFinished = false;

        /**
         * рлж ркЕркирлЗ рлп рк╡ркЪрлНркЪрлЗркирлА рк░рлЗркирлНркбрко рк╕ркВркЦрлНркпрк╛ ркЬркирк░рлЗркЯ ркХрк░рлЗ ркЫрлЗ.
         * @param {number} min - ркирлНркпрлВркиркдрко рк╕ркВркЦрлНркпрк╛ (рк╕ркорк╛рк╡рлЗрк╢ ркерк╛ркп ркЫрлЗ)
         * @param {number} max - ркорк╣ркдрлНркдрко рк╕ркВркЦрлНркпрк╛ (рк╕ркорк╛рк╡рлЗрк╢ ркерк╛ркп ркЫрлЗ)
         * @returns {number} рк░рлЗркирлНркбрко ркЗркирлНркЯрк┐ркЬрк░
         */
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        /**
         * ркПрк░рлЗркирлЗ рк╢рклрк▓ ркХрк░рлЗ ркЫрлЗ (рклрк┐рк╢рк░-ркпрлЗркЯрлНрк╕ ркЕрк▓рлНркЧрлЛрк░рк┐ркзрко).
         * @param {Array} array - рк╢рклрк▓ ркХрк░рк╡рк╛ ркорк╛ркЯрлЗркирлЛ ркПрк░рлЗ
         * @returns {Array} рк╢рклрк▓ ркеркпрлЗрк▓рлЛ ркПрк░рлЗ
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        /**
         * рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркм рк╕рк╣рк┐ркд рлк ркЕркиркирлНркп рк╡рк┐ркХрк▓рлНрккрлЛ ркЬркирк░рлЗркЯ ркХрк░рлЗ ркЫрлЗ.
         * @param {number} correctAnswer - ркмрк╛ркжркмрк╛ркХрлАркирлЛ рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм
         * @returns {Array<number>} рлк рк╡рк┐ркХрк▓рлНрккрлЛркирлЛ рк╢рклрк▓ ркеркпрлЗрк▓рлЛ ркПрк░рлЗ
         */
        function generateOptions(correctAnswer) {
            let options = new Set([correctAnswer]);
            let attempts = 0;
            const maxAttempts = 100;
            
            // рк╡рк┐ркХрк▓рлНрккрлЛркирлА рк░рлЗркирлНркЬ (0 ркерлА 9)
            const minOption = 0;
            const maxOption = 9; 

            while (options.size < 4 && attempts < maxAttempts) {
                let distractor;
                // рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркмркирлА ркЖрк╕рккрк╛рк╕ркирк╛ рк╡рк┐ркХрк▓рлНрккрлЛркирлЗ рккрлНрк░рк╛ркзрк╛ркирлНркп ркЖрккрлЛ
                if (attempts < 50) {
                     distractor = correctAnswer + getRandomInt(-2, 2);
                } else {
                     distractor = getRandomInt(minOption, maxOption);
                }
                
                // ркЦрк╛ркдрк░рлА ркХрк░рлЛ ркХрлЗ рк╡рк┐ркХрк▓рлНркк 0 ркерлА 9 ркирлА рк╡ркЪрлНркЪрлЗ ркЫрлЗ ркЕркирлЗ рккрк╣рлЗрк▓рк╛ркерлА рк╣рк╛ркЬрк░ ркиркерлА
                if (distractor >= minOption && distractor <= maxOption) {
                    options.add(distractor);
                }
                attempts++;
            }
            
            // ркЬрлЛ рк╣ркЬрлА рккркг 4 рк╡рк┐ркХрк▓рлНрккрлЛ рки ркорк│рлЗ, ркдрлЛ рк░рлЗркирлНркбрко ркиркВркмрк░рлНрк╕ ркЙркорлЗрк░рлЛ
            while (options.size < 4) {
                options.add(getRandomInt(minOption, maxOption));
            }

            return shuffleArray(Array.from(options).slice(0, 4)); // ркорк╛ркдрлНрк░ рккрлНрк░ркерко 4 рк▓рлЛ
        }

        /**
         * ркмрк╛ркжркмрк╛ркХрлАркирк╛ рккрлНрк░рк╢рлНркирлЛ ркЕркирлЗ рк╡рк┐ркХрк▓рлНрккрлЛркирлА ркирк╡рлА рк╢рлНрк░рлЗркгрлА ркЬркирк░рлЗркЯ ркХрк░рлЗ ркЫрлЗ.
         */
        function generateProblems() {
            gameProblems = [];
            correctCount = 0;
            gameFinished = false;

            for (let i = 0; i < TOTAL_PROBLEMS; i++) {
                let num1, num2;
                do {
                    // рлп ркЕркирлЗ рлз рк╡ркЪрлНркЪрлЗ рк░рлЗркирлНркбрко ркЕркВркХрлЛ
                    num1 = getRandomInt(1, 9);
                    num2 = getRandomInt(1, 9);
                } while (num1 < num2); // ркЦрк╛ркдрк░рлА ркХрк░рлЛ ркХрлЗ num1 > num2
                
                const answer = num1 - num2;
                const options = generateOptions(answer);

                gameProblems.push({
                    id: i,
                    num1: num1,
                    num2: num2,
                    answer: answer,
                    options: options,
                    status: 'pending', // 'pending', 'correct', 'wrong'
                    selected: null // рккрк╕ркВркж ркХрк░рлЗрк▓рлЛ рк╡рк┐ркХрк▓рлНркк
                });
            }
        }

        /**
         * рккрлНрк░рк╢рлНркиркирлЛ ркЬрк╡рк╛ркм ркдрккрк╛рк╕рлЗ ркЫрлЗ ркЕркирлЗ UI ркЕрккркбрлЗркЯ ркХрк░рлЗ ркЫрлЗ.
         * @param {number} problemIndex - gameProblems ркПрк░рлЗркорк╛ркВ рккрлНрк░рк╢рлНркиркирлЛ ркЗркирлНркбрлЗркХрлНрк╕
         * @param {number} selectedAnswer - рк╡рккрк░рк╛рк╢ркХрк░рлНркдрк╛ ркжрлНрк╡рк╛рк░рк╛ рккрк╕ркВркж ркХрк░рк╛ркпрлЗрк▓ ркЬрк╡рк╛ркм
         * @param {HTMLElement} selectedElement - HTML ркПрк▓рк┐ркорлЗркирлНркЯ ркЬрлЗ рк╡рккрк░рк╛рк╢ркХрк░рлНркдрк╛ркП ркЯркЪ ркХрк░рлНркпрлЛ ркЫрлЗ
         */
        function checkAnswer(problemIndex, selectedAnswer, selectedElement) {
            if (gameFinished) return;

            const problem = gameProblems[problemIndex];
            if (problem.status !== 'pending') return; // ркЬрлЛ рккрк╣рлЗрк▓рк╛ркерлА ркЬрк╡рк╛ркм ркЖрккрлА ркжрлАркзрлЛ рк╣рлЛркп ркдрлЛ ркХрк╢рлБркВ рки ркХрк░рлЛ

            problem.selected = selectedAnswer;
            
            const isCorrect = (selectedAnswer === problem.answer);
            
            // ркмркзрк╛ рк╡рк┐ркХрк▓рлНрккрлЛркирлЗ 'answered-state' ркХрлНрк▓рк╛рк╕ рк╕рк╛ркерлЗ ркЕркХрлНрк╖рко (disable) ркХрк░рлЛ
            const optionContainer = selectedElement.closest('.option-row');
            const allOptions = optionContainer.querySelectorAll('.option-circle');
            allOptions.forEach(opt => opt.classList.add('disabled', 'answered-state')); 

            if (isCorrect) {
                problem.status = 'correct';
                correctCount++;
                // option-circle ркХрлНрк▓рк╛рк╕ ркжрлВрк░ ркХрк░рк╡рк╛ркирлА ркЬрк░рлВрк░ ркиркерлА, рккркг correct ркХрлНрк▓рк╛рк╕ ркЙркорлЗрк░рлЛ
                selectedElement.classList.add('correct');
            } else {
                problem.status = 'wrong';
                selectedElement.classList.add('wrong');
                
                // рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркмркирлЗ рк╣рк╛ркЗрк▓рк╛ркЗркЯ ркХрк░рлЛ
                const correctAnswerElement = optionContainer.querySelector(`[data-answer="${problem.answer}"]`);
                if (correctAnswerElement) {
                    correctAnswerElement.classList.add('correct');
                }
            }

            // рк╕рлНркХрлЛрк░ ркЕрккркбрлЗркЯ ркХрк░рлЛ
            document.getElementById('scoreDisplay').textContent = `${correctCount} / ${TOTAL_PROBLEMS}`;

            // ркЪрлЗркХ ркХрк░рлЛ ркХрлЗ ркЧрлЗрко рккрлВрк░рлА ркеркИ ркЧркИ ркЫрлЗ ркХрлЗ ркирк╣рлАркВ
            if (gameProblems.every(p => p.status !== 'pending')) {
                gameFinished = true;
                showEndGameMessage();
            }
        }

        /**
         * ркЧрлЗрко рккрлВрк░рлА ркеркпрк╛ркирлЛ ркорлЗрк╕рлЗркЬ ркмрлЛркХрлНрк╕ ркжрк░рлНрк╢рк╛рк╡рлЗ ркЫрлЗ.
         */
        function showEndGameMessage() {
            const titleElement = document.getElementById('messageTitle');
            const textElement = document.getElementById('messageText');
            const messageBox = document.getElementById('messageBox');
            
            titleElement.classList.remove('text-red-600', 'text-green-600');
            
            if (correctCount === TOTAL_PROBLEMS) {
                titleElement.textContent = "ркЙркдрлНркдрко ркХрк╛рк░рлНркп! ЁЯОЙ";
                textElement.textContent = `ркдркорлЗ ркмркзрк╛ рлл рккрлНрк░рк╢рлНркирлЛркирк╛ рк╕рк╛ркЪрк╛ ркЬрк╡рк╛ркм ркЖрккрлНркпрк╛ ркЫрлЗ. ркдркорк╛рк░рлЛ рк╕рлНркХрлЛрк░ ркЫрлЗ: ${correctCount}/${TOTAL_PROBLEMS}.`; // ркЕрк╣рлАркВ рклрлЗрк░рклрк╛рк░ ркХрк░рлНркпрлЛ ркЫрлЗ: 10 ркерлА 5
                titleElement.style.color = '#059669'; /* green-600 */
            } else {
                titleElement.textContent = "ркЧрлЗрко рккрлВрк░рлА ркеркИ!";
                textElement.textContent = `ркдркорк╛рк░рлЛ ркЕркВркдрк┐рко рк╕рлНркХрлЛрк░: ${correctCount}/${TOTAL_PROBLEMS}. рк╡ркзрлБ рккрлНрк░рлЗркХрлНркЯрк┐рк╕ ркорк╛ркЯрлЗ рклрк░рлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ!`;
                titleElement.style.color = '#2563eb'; /* blue-600 */
            }
            
            messageBox.classList.add('active'); // show modal
        }

        /**
         * ркорлЗрк╕рлЗркЬ ркмрлЛркХрлНрк╕ ркмркВркз ркХрк░рлЗ ркЫрлЗ.
         */
        function closeMessageBox() {
            document.getElementById('messageBox').classList.remove('active');
        }

        /**
         * рккрлНрк░рк╢рлНркирлЛркирлЗ HTML ркорк╛ркВ рк░рлЗркирлНркбрк░ ркХрк░рлЗ ркЫрлЗ.
         */
        function renderGame() {
            const container = document.getElementById('gameContainer');
            container.innerHTML = ''; // ркХркирлНркЯрлЗркирк░ рк╕рк╛ркл ркХрк░рлЛ

            gameProblems.forEach((problem, index) => {
                const problemDiv = document.createElement('div');
                problemDiv.className = 'problem-row';
                
                // рккрлНрк░рк╢рлНрки ркнрк╛ркЧ (e.g., 6 - 2 =)
                const questionTextDiv = document.createElement('div');
                questionTextDiv.className = 'question-text';
                questionTextDiv.innerHTML = `<span>${problem.num1} - ${problem.num2} =</span>`;
                problemDiv.appendChild(questionTextDiv);

                // рк╡рк┐ркХрк▓рлНрккрлЛ ркнрк╛ркЧ
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'option-row';

                let optionsDisabled = problem.status !== 'pending';

                problem.options.forEach(option => {
                    const optionElement = document.createElement('div');
                    
                    let classes = 'option-circle';
                    
                    if (optionsDisabled) {
                        // ркмркзрк╛ рк╡рк┐ркХрк▓рлНрккрлЛ рккрк░ disable ркЕркирлЗ answered-state ркХрлНрк▓рк╛рк╕ ркЙркорлЗрк░рлЛ
                        classes += ' disabled answered-state';
                        
                        // рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм
                        if (option === problem.answer) {
                            classes += ' correct';
                        } 
                        // ркЦрлЛркЯрлЛ рккрк╕ркВркж ркХрк░рлЗрк▓рлЛ ркЬрк╡рк╛ркм
                        else if (option === problem.selected) {
                            classes += ' wrong';
                        }
                        // ркмрк╛ркХрлАркирк╛ ркЕркирк╕рлЗрк▓рлЗркХрлНркЯрлЗркб рк╡рк┐ркХрк▓рлНрккрлЛ ркорк╛ркЯрлЗ ркХрлЛркИ рк╡рк┐рк╢рлЗрк╖ ркХрлНрк▓рк╛рк╕ ркирк╣рлАркВ
                    }

                    optionElement.className = classes;
                    optionElement.textContent = option;
                    optionElement.setAttribute('data-index', index);
                    optionElement.setAttribute('data-answer', option);

                    if (!optionsDisabled) {
                        optionElement.addEventListener('click', (e) => {
                            // рк╕рлНркЯрлНрк░рк┐ркВркЧркорк╛ркВркерлА рк╕ркВркЦрлНркпрк╛ркорк╛ркВ рк░рлВрккрк╛ркВркдрк░
                            const selectedValue = parseInt(e.target.textContent);
                            const problemIdx = parseInt(e.target.getAttribute('data-index'));
                            checkAnswer(problemIdx, selectedValue, e.target);
                        });
                    }

                    optionsDiv.appendChild(optionElement);
                });

                problemDiv.appendChild(optionsDiv);
                container.appendChild(problemDiv);
            });
        }

        /**
         * ркирк╡рлА ркЧрлЗрко рк╢рк░рлВ ркХрк░рлЗ ркЫрлЗ.
         */
        function initGame() {
            generateProblems();
            renderGame();
            document.getElementById('scoreDisplay').textContent = `рлж / ${TOTAL_PROBLEMS}`;
        }

        // ркЗрк╡рлЗркирлНркЯ рк▓рк┐рк╕ркирк░рлНрк╕
        document.getElementById('newGameButton').addEventListener('click', initGame);

        // рккрлЗркЬ рк▓рлЛркб ркерк╡рк╛ рккрк░ ркЧрлЗрко рк╢рк░рлВ ркХрк░рлЛ
        window.onload = function() {
            initGame();
        };

    </script>
</body>
</html>